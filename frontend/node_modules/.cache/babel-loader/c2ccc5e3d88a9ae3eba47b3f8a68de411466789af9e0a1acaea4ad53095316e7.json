{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import BottomNav from\"../components/BottomNav\";import{useNavigate}from\"react-router-dom\";import ProfileEditModal from\"../components/ProfileEditModal\";import{useAuth}from\"../hooks/useAuth\";import{API_BASE_URL}from'../lib/openai';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";// 프로필 이미지 경로 상수로 지정\nconst DEFAULT_PROFILE_IMG=\"/imgdefault.jpg\";// 실제 파일 경로로 교체 필요\n// 좋아요(하트) 상태 관리\nconst FAVOR_API=\"/api/character/favor\";function ForYouSkeleton(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"70vh\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#f3f3f3\",borderRadius:20,padding:32,width:320,maxWidth:\"90vw\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",boxShadow:\"0 2px 16px rgba(0,0,0,0.07)\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:100,height:100,borderRadius:\"50%\",background:\"#e0e0e0\",marginBottom:20,animation:\"pulse 1.2s infinite\"}}),/*#__PURE__*/_jsx(\"div\",{style:{width:120,height:24,borderRadius:8,background:\"#e0e0e0\",marginBottom:12,animation:\"pulse 1.2s infinite\"}}),/*#__PURE__*/_jsx(\"div\",{style:{width:180,height:18,borderRadius:8,background:\"#e0e0e0\",marginBottom:16,animation:\"pulse 1.2s infinite\"}}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:48,borderRadius:12,background:\"#e0e0e0\",marginTop:16,animation:\"pulse 1.2s infinite\"}})]}),/*#__PURE__*/_jsx(\"style\",{children:\"@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }\"})]});}function CharacterDetailModal(_ref){let{isOpen,onClose,character,onChatClick}=_ref;const[tab,setTab]=React.useState(0);if(!isOpen||!character)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(0,0,0,0.75)',zIndex:3000,display:'flex',alignItems:'center',justifyContent:'center',overflowY:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',maxWidth:430,background:'#18171a',borderRadius:22,boxShadow:'0 4px 32px #0007',position:'relative',margin:'32px 0',display:'flex',flexDirection:'column',alignItems:'center',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{position:'absolute',left:18,top:18,background:'rgba(0,0,0,0.32)',border:'none',fontSize:28,color:'#fff',cursor:'pointer',zIndex:21,padding:'4px 12px',borderRadius:18,lineHeight:1},\"aria-label\":\"\\uB4A4\\uB85C\\uAC00\\uAE30\",children:\"\\u2190\"}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',aspectRatio:'3/4',background:'#222',position:'relative',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"img\",{src:character.profileImg||DEFAULT_PROFILE_IMG,alt:character.name,style:{width:'100%',height:'100%',objectFit:'cover',objectPosition:'center',zIndex:1,filter:'brightness(0.92)'},onError:e=>{if(e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG))return;e.currentTarget.onerror=null;e.currentTarget.src=DEFAULT_PROFILE_IMG;}}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',left:18,top:18,display:'flex',alignItems:'center',gap:10,zIndex:2},children:[/*#__PURE__*/_jsx(\"span\",{style:{background:'#ffb3d1',color:'#fff',fontWeight:700,fontSize:13,borderRadius:8,padding:'4px 10px'},children:character.category||'카테고리 없음'}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#fff',fontWeight:500,fontSize:15,opacity:0.85},children:\"by. \\uC81C\\uC791\\uC790\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',marginTop:-32,zIndex:3,width:'100%'},children:[/*#__PURE__*/_jsx(\"img\",{src:character.profileImg||DEFAULT_PROFILE_IMG,alt:character.name,style:{width:80,height:80,borderRadius:'50%',objectFit:'cover',border:'3px solid #fff',background:'#eee',marginBottom:8,boxShadow:'0 2px 12px #0003'},onError:e=>{if(e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG))return;e.currentTarget.onerror=null;e.currentTarget.src=DEFAULT_PROFILE_IMG;}}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22,color:'#fff',marginBottom:2},children:character.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:16,color:'#ccc',marginBottom:10},children:[character.age,\"\\uC0B4 \\xB7 \",character.job]})]}),character.firstScene&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:15,color:'#bbb',margin:'0 0 4px 0',textAlign:'center',maxWidth:320},children:character.firstScene}),character.firstMessage&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:17,color:'#fff',fontWeight:500,background:'rgba(255,255,255,0.08)',borderRadius:10,padding:'8px 16px',margin:'0 0 8px 0',textAlign:'center',maxWidth:320},children:character.firstMessage}),character.selectedTags&&character.selectedTags.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px 20px 0 20px',display:'flex',gap:8,flexWrap:'wrap',width:'100%'},children:character.selectedTags.map(tag=>/*#__PURE__*/_jsxs(\"span\",{style:{background:'#ffd6ea',color:'#ff4081',borderRadius:8,padding:'4px 10px',fontWeight:600,fontSize:14},children:[\"#\",tag]},tag))}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',margin:'24px 0 0 0',borderBottom:'1.5px solid #f5b3d7',width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{onClick:()=>setTab(0),style:{flex:1,textAlign:'center',padding:12,fontWeight:700,color:tab===0?'#ff4081':'#bbb',borderBottom:tab===0?'2.5px solid #ff4081':'none',cursor:'pointer'},children:\"\\uC11C\\uC0AC\"}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>setTab(1),style:{flex:1,textAlign:'center',padding:12,fontWeight:700,color:tab===1?'#ff4081':'#bbb',borderBottom:tab===1?'2.5px solid #ff4081':'none',cursor:'pointer'},children:\"\\uCCAB \\uC7A5\\uBA74\"}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>setTab(2),style:{flex:1,textAlign:'center',padding:12,fontWeight:700,color:tab===2?'#ff4081':'#bbb',borderBottom:tab===2?'2.5px solid #ff4081':'none',cursor:'pointer'},children:\"\\uCEE4\\uBBA4\\uB2C8\\uD2F0\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',width:'100%',paddingBottom:90},children:[tab===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:6,color:'#fff'},children:[character.name,\"\\uC758 \\uC11C\\uC0AC\"]}),/*#__PURE__*/_jsx(\"div\",{style:{background:'#232124',borderRadius:12,padding:16,fontWeight:500,color:'#fff',fontSize:16},children:character.firstScene||'등록된 서사가 없습니다.'})]}),tab===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:6,color:'#fff'},children:\"\\uCCAB \\uC0C1\\uD669\"}),/*#__PURE__*/_jsx(\"div\",{style:{background:'#232124',borderRadius:12,padding:16,fontWeight:500,color:'#fff',fontSize:16,marginBottom:16},children:character.firstScene||'등록된 첫 상황이 없습니다.'}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:6,color:'#fff'},children:\"\\uCC44\\uD305 \\uCCAB \\uB9C8\\uB514\"}),/*#__PURE__*/_jsx(\"div\",{style:{background:'#232124',borderRadius:12,padding:16,fontWeight:500,color:'#fff',fontSize:16},children:character.firstMessage||'등록된 첫 마디가 없습니다.'})]}),tab===2&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{style:{background:'#232124',borderRadius:12,padding:32,fontWeight:700,color:'#ff4081',fontSize:18,textAlign:'center'},children:\"\\uC900\\uBE44\\uC911\"})})]}),/*#__PURE__*/_jsx(\"button\",{style:{position:'absolute',left:'50%',transform:'translateX(-50%)',bottom:18,height:56,width:'90%',maxWidth:370,background:'#ff4081',color:'#fff',fontWeight:700,fontSize:20,border:'none',borderRadius:18,cursor:'pointer',zIndex:10,boxShadow:'0 2px 12px #ff408133'},onClick:onChatClick,children:\"\\uCC44\\uD305\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{position:'absolute',right:18,top:18,background:'none',border:'none',fontSize:28,color:'#fff',cursor:'pointer',zIndex:20},children:\"\\u2716\\uFE0F\"})]})});}export default function ForYouPage(){const[characters,setCharacters]=useState([]);const[loading,setLoading]=useState(true);const[index,setIndex]=useState(0);const[showPersonaModal,setShowPersonaModal]=useState(false);const[showPersonaManager,setShowPersonaManager]=useState(false);const[showPersonaCreator,setShowPersonaCreator]=useState(false);const[personas,setPersonas]=useState([]);const[selectedPersona,setSelectedPersona]=useState(\"\");const[addingPersona,setAddingPersona]=useState(false);const[newPersonaName,setNewPersonaName]=useState(\"\");const[newPersonaAvatar,setNewPersonaAvatar]=useState(\"\");const[creatorProfileImg,setCreatorProfileImg]=useState(\"\");const[creatorGender,setCreatorGender]=useState(\"밝히지 않음\");const[creatorName,setCreatorName]=useState(\"\");const[creatorAge,setCreatorAge]=useState(\"\");const[creatorJob,setCreatorJob]=useState(\"\");const[creatorInfo,setCreatorInfo]=useState(\"\");const[creatorHabit,setCreatorHabit]=useState(\"\");const[showProfileModal,setShowProfileModal]=useState(false);const[selectedProfile,setSelectedProfile]=useState(null);const[showProfileEditModal,setShowProfileEditModal]=useState(false);const[editProfile,setEditProfile]=useState(null);const[showProfileCreateModal,setShowProfileCreateModal]=useState(false);const navigate=useNavigate();const[introLoading,setIntroLoading]=useState(true);const[likedCharacters,setLikedCharacters]=useState([]);const{user}=useAuth();const userId=(user===null||user===void 0?void 0:user.uid)||\"\";const[showArchiveModal,setShowArchiveModal]=useState(false);const[archiveDetailCharacter,setArchiveDetailCharacter]=useState(null);const[showArchiveDetailModal,setShowArchiveDetailModal]=useState(false);// 좋아요한 캐릭터 목록 불러오기\nuseEffect(()=>{if(!userId)return;fetch(\"\".concat(API_BASE_URL,\"/api/character/favor?userId=\").concat(userId)).then(res=>res.json()).then(data=>{if(data.ok&&Array.isArray(data.liked))setLikedCharacters(data.liked);});},[userId]);// 하트(좋아요) 토글\nconst handleToggleLike=async characterId=>{if(!userId)return;const liked=likedCharacters.includes(characterId);if(!liked){// 좋아요 추가\nawait fetch(FAVOR_API,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({userId,characterId})});setLikedCharacters(prev=>[...prev,characterId]);}else{// 좋아요 취소\nawait fetch(FAVOR_API,{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({userId,characterId})});setLikedCharacters(prev=>prev.filter(id=>id!==characterId));}};// 프로필 사진 업로드\nconst fileInputRef=React.useRef(null);const handleProfileImgClick=()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleProfileImgChange=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){const reader=new FileReader();reader.onload=ev=>{var _ev$target;setCreatorProfileImg((_ev$target=ev.target)===null||_ev$target===void 0?void 0:_ev$target.result);};reader.readAsDataURL(file);}};// 멀티프로필 목록 불러오기 (GET)\nuseEffect(()=>{if(!userId)return;fetch(\"\".concat(API_BASE_URL,\"/api/persona?userId=\").concat(userId)).then(res=>res.json()).then(data=>{if(data.ok&&Array.isArray(data.personas))setPersonas(data.personas);else setPersonas([]);}).catch(()=>setPersonas([]));},[userId,showPersonaManager,showPersonaCreator]);useEffect(()=>{fetch(\"\".concat(API_BASE_URL,\"/api/character\")).then(res=>res.json()).then(data=>{if(data.ok)setCharacters(data.characters);setLoading(false);});},[]);useEffect(()=>{if(showPersonaCreator){setCreatorProfileImg(\"\");setCreatorGender(\"밝히지 않음\");setCreatorName(\"\");setCreatorAge(\"\");setCreatorJob(\"\");setCreatorInfo(\"\");setCreatorHabit(\"\");}},[showPersonaCreator]);useEffect(()=>{setIntroLoading(true);const timer=setTimeout(()=>setIntroLoading(false),2500);return()=>clearTimeout(timer);},[]);const handlePrev=()=>{setIndex(prev=>prev===0?characters.length-1:prev-1);};const handleNext=()=>{setIndex(prev=>prev===characters.length-1?0:prev+1);};// 터치 스와이프 지원\nlet touchStartX=0;let touchEndX=0;const handleTouchStart=e=>{touchStartX=e.changedTouches[0].screenX;};const handleTouchEnd=e=>{touchEndX=e.changedTouches[0].screenX;if(touchEndX-touchStartX>50)handlePrev();else if(touchStartX-touchEndX>50)handleNext();};// 채팅하기 버튼 클릭 시\nconst handleChatClick=()=>{if(multiPersonas.length===0){setShowPersonaCreator(true);return;}setShowPersonaModal(true);};// 페르소나 추가\nconst handleAddPersona=()=>{if(!newPersonaName)return;setPersonas(prev=>[...prev,{id:newPersonaName,name:newPersonaName,avatar:newPersonaAvatar||\"/imgdefault.jpg\"}]);setSelectedPersona(newPersonaName);setNewPersonaName(\"\");setNewPersonaAvatar(\"\");setAddingPersona(false);};// 멀티프로필 생성 완료 (POST)\nconst handlePersonaCreate=async()=>{if(!userId)return;if(!creatorName)return alert(\"이름을 입력해주세요\");const payload={userId,name:creatorName,avatar:creatorProfileImg||\"/imgdefault.jpg\",gender:creatorGender,age:creatorAge,job:creatorJob,info:creatorInfo,habit:creatorHabit};const res=await fetch(\"\".concat(API_BASE_URL,\"/api/persona\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});const data=await res.json();if(data.ok){setShowPersonaCreator(false);setShowPersonaManager(false);// 폼 초기화는 useEffect에서 처리\n}else{alert(\"프로필 저장 실패: \"+data.error);}};// 멀티프로필 삭제 (DELETE)\nconst handleDeletePersona=async id=>{if(!userId)return;if(id===userId)return;// 기본 프로필은 삭제 불가\nif(window.confirm(\"정말로 삭제하시겠습니까?\")){await fetch(\"\".concat(API_BASE_URL,\"/api/persona/\").concat(id),{method:\"DELETE\"});setPersonas(prev=>prev.filter(p=>p.id!==id));if(selectedPersona===id&&personas.length>1){setSelectedPersona(personas[0].id);}}};// 채팅 시작\nconst handleStartChat=()=>{setShowPersonaModal(false);if(selectedPersona===userId){alert(\"기본 프로필은 선택할 수 없습니다.\");}else{navigate(\"/chat/\".concat(characters[index].id,\"?persona=\").concat(selectedPersona));}};// 캐릭터 카드 클릭 시 상세로 이동\nconst handleCardClick=id=>{navigate(\"/character/\".concat(id));};// 멀티프로필만 추출 (id, name 둘 다 체크)\nconst multiPersonas=personas.filter(p=>p.id!==userId&&p.name!==userId&&p.name!==\"user_74127\");// 기본 프로필(관리계정) 추출\nconst defaultPersona=personas.find(p=>p.id===userId);// localStorage에서 유저 이름 가져오기\nlet localUserName=undefined;try{const savedUserProfile=localStorage.getItem('userProfile');if(savedUserProfile){const profile=JSON.parse(savedUserProfile);localUserName=profile.name;}}catch(e){}// 멀티프로필 관리 모달 내부\nconst PersonaManager=()=>{const managedPersonas=personas.filter(p=>p.id!==userId&&p.name!==userId);return/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"rgba(20,20,20,0.98)\",zIndex:2000,display:\"flex\",flexDirection:\"column\",alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',maxWidth:430,background:'#18171a',borderRadius:18,boxShadow:'0 2px 16px #0005',minHeight:480,display:'flex',flexDirection:'column',justifyContent:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",padding:\"18px 20px 10px 20px\",borderBottom:\"1px solid #222\",justifyContent:'space-between',borderTopLeftRadius:18,borderTopRightRadius:18},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPersonaManager(false),style:{background:\"none\",border:\"none\",fontSize:26,marginRight:8,cursor:\"pointer\",color:\"#fff\"},children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:22,color:'#fff'},children:\"\\uBA40\\uD2F0\\uD504\\uB85C\\uD544\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowProfileCreateModal(true),disabled:managedPersonas.length>=10,style:{display:\"flex\",alignItems:\"center\",background:\"none\",border:\"none\",color:managedPersonas.length>=10?\"#888\":\"#ff4081\",fontWeight:600,fontSize:18,cursor:managedPersonas.length>=10?\"not-allowed\":\"pointer\"},title:managedPersonas.length>=10?'최대 10개까지 생성할 수 있습니다.':'',children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:26,marginRight:4},children:\"+\"}),\" \\uB9CC\\uB4E4\\uAE30 (\",managedPersonas.length,\"/10)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:24},children:[managedPersonas.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#bbb\",fontSize:16,marginTop:40},children:\"\\uC544\\uC9C1 \\uB4F1\\uB85D\\uB41C \\uD504\\uB85C\\uD544\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),managedPersonas.map(p=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",background:\"#232124\",borderRadius:16,padding:'18px 16px',marginBottom:18,boxShadow:'0 2px 8px #0002',minHeight:68},children:[/*#__PURE__*/_jsx(\"img\",{src:p.avatar||\"/imgdefault.jpg\",alt:p.name,style:{width:54,height:54,borderRadius:\"50%\",marginRight:18,objectFit:\"cover\",boxShadow:'0 2px 8px #0002'},onError:e=>{e.currentTarget.onerror=null;e.currentTarget.src=\"/imgdefault.jpg\";}}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:19,color:'#fff'},children:p.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleProfileEdit(p),style:{marginLeft:\"auto\",background:\"none\",border:\"none\",color:\"#ff4081\",fontSize:18,fontWeight:600,cursor:\"pointer\",padding:'0 8px'},children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeletePersona(p.id),style:{background:\"none\",border:\"none\",color:\"#ff4081\",fontSize:26,fontWeight:700,cursor:\"pointer\",padding:'0 4px'},children:\"\\u2715\"})]},p.id))]})]})});};// 멀티프로필 생성 폼 전체화면\nconst PersonaCreator=_ref2=>{let{creatorProfileImg,handleProfileImgClick,fileInputRef,handleProfileImgChange,creatorGender,setCreatorGender,creatorName,setCreatorName,creatorAge,setCreatorAge,creatorJob,setCreatorJob,creatorInfo,setCreatorInfo,creatorHabit,setCreatorHabit,handlePersonaCreate,setShowPersonaCreator}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"var(--color-card)\",zIndex:3000,display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",padding:\"18px 20px 10px 20px\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPersonaCreator(false),style:{background:\"none\",border:\"none\",fontSize:26,cursor:\"pointer\",color:\"#fff\"},children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePersonaCreate,style:{background:\"none\",border:\"none\",color:\"#ff4081\",fontWeight:700,fontSize:20,cursor:\"pointer\"},children:\"\\uC644\\uB8CC\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",marginTop:16},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",width:110,height:110,marginBottom:16},children:[/*#__PURE__*/_jsx(\"img\",{src:creatorProfileImg||\"/imgdefault.jpg\",alt:\"\\uD504\\uB85C\\uD544\",style:{width:110,height:110,borderRadius:\"50%\",objectFit:\"cover\",background:\"#ffe5e5\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleProfileImgClick,style:{position:\"absolute\",right:0,bottom:0,background:\"#fff\",border:\"none\",borderRadius:\"50%\",width:36,height:36,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:20,boxShadow:\"0 2px 8px rgba(0,0,0,0.08)\",cursor:\"pointer\"},\"aria-label\":\"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4 \\uBCC0\\uACBD\",children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"edit\",children:\"\\u270F\\uFE0F\"})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*\",style:{display:\"none\"},onChange:handleProfileImgChange})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"0 20px\",marginTop:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:8},children:\"\\uC131\\uBCC4\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:18,marginBottom:18},children:['남성','여성','밝히지 않음'].map(g=>/*#__PURE__*/_jsxs(\"label\",{style:{display:\"flex\",alignItems:\"center\",fontWeight:500,fontSize:16},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",checked:creatorGender===g,onChange:()=>setCreatorGender(g),style:{marginRight:6}}),\" \",g]},g))}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:4},children:[\"\\uC774\\uB984 \",/*#__PURE__*/_jsx(\"span\",{style:{color:'#888',fontWeight:400,fontSize:14},children:\"(\\uD544\\uC218)\"})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",value:creatorName,onChange:e=>{const v=e.target.value;if(v.length<=15)setCreatorName(v);else setCreatorName(v.slice(0,15));},style:{width:\"100%\",borderRadius:12,border:\"1px solid #eee\",padding:14,fontSize:16,marginBottom:2,background:'#fafafa'}}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#bbb',fontSize:13,textAlign:'right',marginBottom:12},children:[creatorName.length,\"/15\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:4},children:\"\\uB098\\uC774\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uB098\\uC774\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",value:creatorAge,onChange:e=>{const v=e.target.value;if(v.length<=15)setCreatorAge(v);else setCreatorAge(v.slice(0,15));},style:{width:\"100%\",borderRadius:12,border:\"1px solid #eee\",padding:14,fontSize:16,marginBottom:2,background:'#fafafa'}}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#bbb',fontSize:13,textAlign:'right',marginBottom:12},children:[creatorAge.length,\"/15\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:4},children:\"\\uC9C1\\uC5C5\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uC9C1\\uC5C5\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",value:creatorJob,onChange:e=>{const v=e.target.value;if(v.length<=15)setCreatorJob(v);else setCreatorJob(v.slice(0,15));},style:{width:\"100%\",borderRadius:12,border:\"1px solid #eee\",padding:14,fontSize:16,marginBottom:2,background:'#fafafa'}}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#bbb',fontSize:13,textAlign:'right',marginBottom:12},children:[creatorJob.length,\"/15\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:4},children:\"\\uAE30\\uBCF8 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\uC678\\uBAA8, \\uC131\\uACA9 \\uB4F1 \\uAE30\\uBCF8 \\uC815\\uBCF4\\uB97C \\uC54C\\uB824\\uC8FC\\uC138\\uC694\",value:creatorInfo,onChange:e=>{const v=e.target.value;if(v.length<=500)setCreatorInfo(v);else setCreatorInfo(v.slice(0,500));},style:{width:\"100%\",borderRadius:12,border:\"1px solid #eee\",padding:14,fontSize:16,marginBottom:2,background:'#fafafa',resize:'none'},rows:3}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#bbb',fontSize:13,textAlign:'right',marginBottom:12},children:[creatorInfo.length,\"/500\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:4},children:\"\\uC2B5\\uAD00\\uC801\\uC778 \\uB9D0\\uACFC \\uD589\\uB3D9\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\uC608\\uC2DC\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",value:creatorHabit,onChange:e=>{const v=e.target.value;if(v.length<=500)setCreatorHabit(v);else setCreatorHabit(v.slice(0,500));},style:{width:\"100%\",borderRadius:12,border:\"1px solid #eee\",padding:14,fontSize:16,marginBottom:2,background:'#fafafa',resize:'none'},rows:3}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#bbb',fontSize:13,textAlign:'right',marginBottom:12},children:[creatorHabit.length,\"/500\"]})]})]});};const handleProfileEdit=profile=>{console.log('수정 클릭',profile);setEditProfile(profile);setShowProfileEditModal(true);};const handleProfileSave=async updatedProfile=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/persona/\").concat(updatedProfile.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:updatedProfile.name,gender:updatedProfile.gender,age:updatedProfile.age,job:updatedProfile.job,info:updatedProfile.info,habit:updatedProfile.habit,avatar:updatedProfile.avatar||'/imgdefault.jpg'})});if(response.ok){setPersonas(prev=>prev.map(p=>p.id===updatedProfile.id?updatedProfile:p));setShowProfileEditModal(false);setEditProfile(null);alert('프로필이 성공적으로 수정되었습니다.');}else{throw new Error('프로필 수정에 실패했습니다.');}}catch(error){alert('프로필 수정 중 오류가 발생했습니다.');}};const handleProfileCreate=async newProfile=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/persona\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId,name:newProfile.name,gender:newProfile.gender,age:newProfile.age,job:newProfile.job,info:newProfile.info,habit:newProfile.habit,avatar:newProfile.avatar})});if(response.ok){setShowProfileCreateModal(false);setShowPersonaManager(false);// 목록 갱신\nfetch(\"\".concat(API_BASE_URL,\"/api/persona?userId=\").concat(userId)).then(res=>res.json()).then(data=>{if(data.ok)setPersonas(data.personas);});alert('프로필이 성공적으로 생성되었습니다.');}else{throw new Error('프로필 생성에 실패했습니다.');}}catch(error){alert('프로필 생성 중 오류가 발생했습니다.');}};// selectedPersona의 기본값 설정 부분\nuseEffect(()=>{if(multiPersonas.length>0){// 현재 선택된 프로필이 목록에 없으면만 첫 번째로 초기화\nif(!multiPersonas.some(p=>p.id===selectedPersona)){setSelectedPersona(multiPersonas[0].id);}}else{setSelectedPersona(\"\");}// eslint-disable-next-line\n},[multiPersonas,showPersonaModal]);return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',maxWidth:430,margin:'0 auto',minHeight:'100vh',background:'#111',display:'flex',flexDirection:'column',alignItems:'center',paddingBottom:80},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',padding:\"24px 20px 0 20px\",width:'100%',maxWidth:430,display:'flex',alignItems:'center',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:24,color:'#fff',letterSpacing:1},children:\"FOR YOU \\u2665\"}),/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:20,top:24,fontSize:26,color:'#ffb3d1',cursor:'pointer'},title:\"\\uBCF4\\uAD00\\uD568\",onClick:()=>setShowArchiveModal(true),children:\"\\uD83D\\uDDC2\\uFE0F\"})]}),introLoading?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",height:\"70vh\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:64,height:64,border:\"6px solid #ffb6d5\",borderTop:\"6px solid #ff4081\",borderRadius:\"50%\",animation:\"spin 1s linear infinite\",marginBottom:32}}),/*#__PURE__*/_jsxs(\"div\",{style:{color:\"#fff\",fontWeight:600,fontSize:20,marginBottom:8},children:[localUserName||(defaultPersona===null||defaultPersona===void 0?void 0:defaultPersona.name)||(user===null||user===void 0?void 0:user.displayName)||\"사용자\",\"\\uB2D8\\uACFC \\uC5B4\\uC6B8\\uB9AC\\uB294 \\uCE90\\uB9AD\\uD130\\uB97C \\uCC3E\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4\"]}),/*#__PURE__*/_jsx(\"style\",{children:\"@keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }\"})]}):loading?/*#__PURE__*/_jsx(ForYouSkeleton,{}):characters.length===0?/*#__PURE__*/_jsx(\"div\",{style:{padding:20,color:\"#888\"},children:\"\\uC800\\uC7A5\\uB41C \\uCE90\\uB9AD\\uD130\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}):/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",width:360,height:540,borderRadius:32,overflow:\"hidden\",background:\"#111\",boxShadow:\"0 4px 32px rgba(0,0,0,0.25)\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"img\",{src:characters[index].backgroundImg||characters[index].profileImg||DEFAULT_PROFILE_IMG,alt:\"bg\",style:{position:\"absolute\",inset:0,width:\"100%\",height:\"100%\",objectFit:\"cover\",filter:\"brightness(0.6) blur(1.5px)\",zIndex:1},onError:e=>{if(!e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG)){e.currentTarget.onerror=null;e.currentTarget.src=DEFAULT_PROFILE_IMG;}}}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",top:28,left:24,zIndex:3,color:\"#fff\",textAlign:\"left\",display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"img\",{src:characters[index].profileImg||DEFAULT_PROFILE_IMG,alt:characters[index].name,style:{width:48,height:48,borderRadius:\"50%\",border:\"2px solid #fff\",objectFit:\"cover\",background:\"#eee\",marginRight:14,cursor:'pointer'},onClick:()=>handleCardClick(characters[index].id),onError:e=>{if(!e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG)){e.currentTarget.onerror=null;e.currentTarget.src=DEFAULT_PROFILE_IMG;}}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20},children:characters[index].name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:15,opacity:0.85},children:[characters[index].age?characters[index].age:\"-\",\" | \",characters[index].job||\"-\"]})]})]}),characters[index].firstScene&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:90,left:24,right:24,color:\"#fff\",background:\"rgba(0,0,0,0.35)\",borderRadius:12,padding:\"12px 16px\",fontSize:15,fontWeight:400,lineHeight:1.5,overflow:\"hidden\",textOverflow:\"ellipsis\",display:\"-webkit-box\",WebkitLineClamp:2,WebkitBoxOrient:\"vertical\",zIndex:3,textAlign:'center'},children:characters[index].firstScene}),characters[index].firstMessage&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",left:'50%',top:150,transform:'translateX(-50%)',background:\"#8888\",color:\"#fff\",borderRadius:22,padding:\"12px 24px\",fontSize:16,fontWeight:500,maxWidth:260,zIndex:3,textAlign:'center',boxShadow:'0 2px 8px rgba(0,0,0,0.10)'},children:characters[index].firstMessage}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",right:24,bottom:90,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",zIndex:3},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:32,color:likedCharacters.includes(characters[index].id)?\"#ff4081\":\"#ffb3d1\",marginBottom:6,cursor:'pointer',transition:'color 0.2s'},onClick:()=>handleToggleLike(characters[index].id),title:likedCharacters.includes(characters[index].id)?'좋아요 취소':'좋아요',children:likedCharacters.includes(characters[index].id)?'♥':'♡'}),/*#__PURE__*/_jsx(\"img\",{src:characters[index].profileImg||DEFAULT_PROFILE_IMG,alt:\"\\uC81C\\uC791\\uC790\",style:{width:32,height:32,borderRadius:\"50%\",objectFit:\"cover\",background:\"#eee\"},onError:e=>{if(!e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG)){e.currentTarget.onerror=null;e.currentTarget.src=DEFAULT_PROFILE_IMG;}}}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"#fff\",fontSize:13,marginTop:2},children:\"\\uC81C\\uC791\\uC790\"})]}),/*#__PURE__*/_jsx(\"button\",{style:{position:\"absolute\",left:24,right:24,bottom:24,height:54,background:\"#ff4081\",color:\"#fff\",border:\"none\",borderRadius:28,fontWeight:700,fontSize:20,boxShadow:\"0 2px 8px #ff408155\",cursor:\"pointer\",zIndex:4},onClick:()=>setShowPersonaModal(true),children:\"\\uCC44\\uD305 \\uC2DC\\uC791\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePrev,style:{position:\"absolute\",left:8,top:\"50%\",transform:\"translateY(-50%)\",zIndex:10,width:44,height:44,borderRadius:\"50%\",background:\"rgba(0,0,0,0.32)\",border:\"none\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:28,color:\"#fff\",boxShadow:\"0 2px 8px rgba(0,0,0,0.18)\",cursor:\"pointer\",transition:\"background 0.2s\"},\"aria-label\":\"\\uC774\\uC804 \\uCE90\\uB9AD\\uD130\",onMouseOver:e=>e.currentTarget.style.background=\"rgba(0,0,0,0.5)\",onMouseOut:e=>e.currentTarget.style.background=\"rgba(0,0,0,0.32)\",children:\"<\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,style:{position:\"absolute\",right:8,top:\"50%\",transform:\"translateY(-50%)\",zIndex:10,width:44,height:44,borderRadius:\"50%\",background:\"rgba(0,0,0,0.32)\",border:\"none\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:28,color:\"#fff\",boxShadow:\"0 2px 8px rgba(0,0,0,0.18)\",cursor:\"pointer\",transition:\"background 0.2s\"},\"aria-label\":\"\\uB2E4\\uC74C \\uCE90\\uB9AD\\uD130\",onMouseOver:e=>e.currentTarget.style.background=\"rgba(0,0,0,0.5)\",onMouseOut:e=>e.currentTarget.style.background=\"rgba(0,0,0,0.32)\",children:\">\"})]}),showPersonaModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"#111\",zIndex:1500,display:\"flex\",flexDirection:\"column\",alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',maxWidth:420,background:'#18171a',borderRadius:18,boxShadow:'0 2px 16px #0005',minHeight:480,display:'flex',flexDirection:'column',justifyContent:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",padding:\"16px 16px 10px 16px\",borderBottom:\"1px solid #222\",background:'#111',position:'sticky',top:0,zIndex:2},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPersonaModal(false),style:{background:\"none\",border:\"none\",fontSize:26,marginRight:8,cursor:\"pointer\",color:\"#fff\"},children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:22,color:\"#fff\"},children:\"\\uCC44\\uD305 \\uD504\\uB85C\\uD544\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:18,flex:1,overflowY:\"auto\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16,marginBottom:8,color:\"#fff\"},children:\"\\uBA40\\uD2F0\\uD504\\uB85C\\uD544\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"#bbb\",fontSize:14,marginBottom:18},children:\"\\uC9C1\\uC5C5\\uACFC \\uAE30\\uBCF8 \\uC815\\uBCF4\\uB97C \\uCD94\\uAC00 \\uC9C0\\uC6D0\\uD569\\uB2C8\\uB2E4\"}),multiPersonas.map(p=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",background:selectedPersona===p.id?\"#2a1a22\":\"#18171a\",borderRadius:18,padding:'20px 16px',marginBottom:18,cursor:\"pointer\",minHeight:72,boxShadow:selectedPersona===p.id?'0 2px 12px #ff408122':'none',transition:'background 0.2s'},onClick:()=>setSelectedPersona(p.id),children:[/*#__PURE__*/_jsx(\"img\",{src:p.avatar||\"/imgdefault.jpg\",alt:p.name,style:{width:56,height:56,borderRadius:\"50%\",marginRight:18,objectFit:\"cover\",boxShadow:'0 2px 8px #0002'},onError:e=>{e.currentTarget.onerror=null;e.currentTarget.src=\"/imgdefault.jpg\";}}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:700,fontSize:20,color:\"#fff\",letterSpacing:0.5},children:p.name}),selectedPersona===p.id&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:\"auto\",color:\"#ff4081\",fontSize:32,fontWeight:900},children:\"\\u2714\\uFE0F\"})]},p.id)),multiPersonas.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#ff4081',fontWeight:600,fontSize:16,margin:'32px 0',textAlign:'center'},children:\"\\uBA40\\uD2F0\\uD504\\uB85C\\uD544\\uC744 \\uBA3C\\uC800 \\uC0DD\\uC131\\uD574\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPersonaManager(true),style:{width:\"100%\",background:\"#18141a\",color:\"#ff4081\",border:\"1.5px solid #ff4081\",borderRadius:16,padding:'16px 0',fontWeight:700,fontSize:18,marginTop:10,marginBottom:18,boxShadow:'0 2px 8px #ff408122'},children:\"+ \\uD504\\uB85C\\uD544 \\uCD94\\uAC00/\\uAD00\\uB9AC\"}),multiPersonas.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:handleStartChat,style:{width:\"100%\",background:\"#ff4081\",color:\"#fff\",border:\"none\",borderRadius:16,padding:'18px 0',fontWeight:700,fontSize:20,marginTop:8,boxShadow:'0 2px 12px #ff408133'},children:\"\\uCC44\\uD305\\uD558\\uAE30\"})]})]})}),showPersonaManager&&/*#__PURE__*/_jsx(PersonaManager,{}),showPersonaCreator&&/*#__PURE__*/_jsx(PersonaCreator,{creatorProfileImg:creatorProfileImg,handleProfileImgClick:handleProfileImgClick,fileInputRef:fileInputRef,handleProfileImgChange:handleProfileImgChange,creatorGender:creatorGender,setCreatorGender:setCreatorGender,creatorName:creatorName,setCreatorName:setCreatorName,creatorAge:creatorAge,setCreatorAge:setCreatorAge,creatorJob:creatorJob,setCreatorJob:setCreatorJob,creatorInfo:creatorInfo,setCreatorInfo:setCreatorInfo,creatorHabit:creatorHabit,setCreatorHabit:setCreatorHabit,handlePersonaCreate:handlePersonaCreate,setShowPersonaCreator:setShowPersonaCreator}),/*#__PURE__*/_jsx(CharacterDetailModal,{isOpen:showProfileModal,onClose:()=>setShowProfileModal(false),character:selectedProfile,onChatClick:()=>{setShowProfileModal(false);setTimeout(()=>setShowPersonaModal(true),200);}}),console.log('ProfileEditModal 조건',showProfileEditModal,editProfile),showProfileEditModal&&editProfile&&/*#__PURE__*/_jsx(ProfileEditModal,{isOpen:showProfileEditModal,onClose:()=>{setShowProfileEditModal(false);setEditProfile(null);},profileData:{id:editProfile.id,name:editProfile.name,gender:editProfile.gender||'',age:editProfile.age?parseInt(editProfile.age):0,job:editProfile.job||'',info:editProfile.info||'',habit:editProfile.habit||'',avatar:editProfile.avatar||'/imgdefault.jpg'},onSave:handleProfileSave}),showProfileCreateModal&&/*#__PURE__*/_jsx(ProfileEditModal,{isOpen:showProfileCreateModal,onClose:()=>setShowProfileCreateModal(false),profileData:{id:'',name:'',gender:'',age:0,job:'',info:'',habit:'',avatar:'/imgdefault.jpg'},onSave:handleProfileCreate,mode:\"create\"}),showArchiveModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(0,0,0,0.65)',zIndex:3000,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',maxWidth:400,background:'#18171a',borderRadius:18,boxShadow:'0 2px 16px #0005',minHeight:320,padding:28,display:'flex',flexDirection:'column',alignItems:'center',position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowArchiveModal(false),style:{position:'absolute',right:18,top:18,background:'none',border:'none',fontSize:26,color:'#ff4081',cursor:'pointer'},children:\"\\u2716\\uFE0F\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22,color:'#fff',marginBottom:18},children:\"\\uBCF4\\uAD00\\uD568\"}),likedCharacters.length===0?/*#__PURE__*/_jsx(\"div\",{style:{color:'#bbb',fontSize:16,marginTop:40},children:\"\\uC88B\\uC544\\uC694\\uD55C \\uCE90\\uB9AD\\uD130\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}):/*#__PURE__*/_jsx(\"div\",{style:{width:'100%'},children:characters.filter(c=>likedCharacters.includes(c.id)).map(c=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',background:'#232124',borderRadius:14,padding:'14px 12px',marginBottom:14,boxShadow:'0 2px 8px #0002',cursor:'pointer'},onClick:()=>{setArchiveDetailCharacter(c);setShowArchiveDetailModal(true);},children:[/*#__PURE__*/_jsx(\"img\",{src:c.profileImg||DEFAULT_PROFILE_IMG,alt:c.name,style:{width:48,height:48,borderRadius:'50%',objectFit:'cover',marginRight:14}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:17,color:'#fff'},children:c.name}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#bbb',fontSize:14},children:[c.age?\"\".concat(c.age,\"\\uC0B4\"):'-',\" | \",c.job||'-']})]})]},c.id))})]})}),showArchiveDetailModal&&archiveDetailCharacter&&/*#__PURE__*/_jsx(CharacterDetailModal,{isOpen:showArchiveDetailModal,onClose:()=>setShowArchiveDetailModal(false),character:archiveDetailCharacter,onChatClick:()=>{setShowArchiveDetailModal(false);setTimeout(()=>setShowPersonaModal(true),200);}}),/*#__PURE__*/_jsx(BottomNav,{})]});}","map":{"version":3,"names":["React","useEffect","useState","BottomNav","useNavigate","ProfileEditModal","useAuth","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DEFAULT_PROFILE_IMG","FAVOR_API","ForYouSkeleton","style","display","justifyContent","alignItems","height","children","background","borderRadius","padding","width","maxWidth","flexDirection","boxShadow","marginBottom","animation","marginTop","CharacterDetailModal","_ref","isOpen","onClose","character","onChatClick","tab","setTab","position","top","left","zIndex","overflowY","margin","overflow","onClick","border","fontSize","color","cursor","lineHeight","aspectRatio","src","profileImg","alt","name","objectFit","objectPosition","filter","onError","e","currentTarget","endsWith","onerror","gap","fontWeight","category","opacity","age","job","firstScene","textAlign","firstMessage","selectedTags","length","flexWrap","map","tag","borderBottom","flex","paddingBottom","transform","bottom","right","ForYouPage","characters","setCharacters","loading","setLoading","index","setIndex","showPersonaModal","setShowPersonaModal","showPersonaManager","setShowPersonaManager","showPersonaCreator","setShowPersonaCreator","personas","setPersonas","selectedPersona","setSelectedPersona","addingPersona","setAddingPersona","newPersonaName","setNewPersonaName","newPersonaAvatar","setNewPersonaAvatar","creatorProfileImg","setCreatorProfileImg","creatorGender","setCreatorGender","creatorName","setCreatorName","creatorAge","setCreatorAge","creatorJob","setCreatorJob","creatorInfo","setCreatorInfo","creatorHabit","setCreatorHabit","showProfileModal","setShowProfileModal","selectedProfile","setSelectedProfile","showProfileEditModal","setShowProfileEditModal","editProfile","setEditProfile","showProfileCreateModal","setShowProfileCreateModal","navigate","introLoading","setIntroLoading","likedCharacters","setLikedCharacters","user","userId","uid","showArchiveModal","setShowArchiveModal","archiveDetailCharacter","setArchiveDetailCharacter","showArchiveDetailModal","setShowArchiveDetailModal","fetch","concat","then","res","json","data","ok","Array","isArray","liked","handleToggleLike","characterId","includes","method","headers","body","JSON","stringify","prev","id","fileInputRef","useRef","handleProfileImgClick","_fileInputRef$current","current","click","handleProfileImgChange","_e$target$files","file","target","files","reader","FileReader","onload","ev","_ev$target","result","readAsDataURL","catch","timer","setTimeout","clearTimeout","handlePrev","handleNext","touchStartX","touchEndX","handleTouchStart","changedTouches","screenX","handleTouchEnd","handleChatClick","multiPersonas","handleAddPersona","avatar","handlePersonaCreate","alert","payload","gender","info","habit","error","handleDeletePersona","window","confirm","p","handleStartChat","handleCardClick","defaultPersona","find","localUserName","undefined","savedUserProfile","localStorage","getItem","profile","parse","PersonaManager","managedPersonas","minHeight","borderTopLeftRadius","borderTopRightRadius","marginRight","disabled","title","handleProfileEdit","marginLeft","PersonaCreator","_ref2","type","role","ref","accept","onChange","g","checked","placeholder","value","v","slice","resize","rows","console","log","handleProfileSave","updatedProfile","response","Error","handleProfileCreate","newProfile","some","letterSpacing","borderTop","displayName","backgroundImg","inset","textOverflow","WebkitLineClamp","WebkitBoxOrient","transition","onMouseOver","onMouseOut","profileData","parseInt","onSave","mode","c"],"sources":["/Users/seungsoohan/LovleChat/frontend/src/pages/ForYouPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport BottomNav from \"../components/BottomNav\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FiHeart, FiPlus, FiEdit3, FiX } from \"react-icons/fi\";\nimport ProfileEditModal from \"../components/ProfileEditModal\";\nimport { useAuth } from \"../hooks/useAuth\";\nimport { API_BASE_URL } from '../lib/openai';\n\ninterface Character {\n  id: number;\n  profileImg: string;\n  name: string;\n  age: number;\n  job: string;\n  oneLiner: string;\n  backgroundImg?: string;\n  firstScene?: string;\n  firstMessage?: string;\n  category?: string;\n  userId?: string;\n  selectedTags?: string[];\n}\n\ninterface Persona {\n  id: string;\n  name: string;\n  avatar: string;\n}\n\n// 프로필 이미지 경로 상수로 지정\nconst DEFAULT_PROFILE_IMG = \"/imgdefault.jpg\"; // 실제 파일 경로로 교체 필요\n\n// 좋아요(하트) 상태 관리\nconst FAVOR_API = \"/api/character/favor\";\n\nfunction ForYouSkeleton() {\n  return (\n    <div style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\", height: \"70vh\" }}>\n      <div style={{\n        background: \"#f3f3f3\",\n        borderRadius: 20,\n        padding: 32,\n        width: 320,\n        maxWidth: \"90vw\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        boxShadow: \"0 2px 16px rgba(0,0,0,0.07)\"\n      }}>\n        <div style={{ width: 100, height: 100, borderRadius: \"50%\", background: \"#e0e0e0\", marginBottom: 20, animation: \"pulse 1.2s infinite\" }} />\n        <div style={{ width: 120, height: 24, borderRadius: 8, background: \"#e0e0e0\", marginBottom: 12, animation: \"pulse 1.2s infinite\" }} />\n        <div style={{ width: 180, height: 18, borderRadius: 8, background: \"#e0e0e0\", marginBottom: 16, animation: \"pulse 1.2s infinite\" }} />\n        <div style={{ width: \"100%\", height: 48, borderRadius: 12, background: \"#e0e0e0\", marginTop: 16, animation: \"pulse 1.2s infinite\" }} />\n      </div>\n      <style>\n        {`@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }`}\n      </style>\n    </div>\n  );\n}\n\nfunction CharacterDetailModal({ isOpen, onClose, character, onChatClick }: { isOpen: boolean, onClose: () => void, character: any, onChatClick?: () => void }) {\n  const [tab, setTab] = React.useState(0);\n  if (!isOpen || !character) return null;\n  return (\n    <div style={{\n      position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.75)', zIndex: 3000,\n      display: 'flex', alignItems: 'center', justifyContent: 'center', overflowY: 'auto'\n    }}>\n      <div style={{ width: '100%', maxWidth: 430, background: '#18171a', borderRadius: 22, boxShadow: '0 4px 32px #0007', position: 'relative', margin: '32px 0', display: 'flex', flexDirection: 'column', alignItems: 'center', overflow: 'hidden' }}>\n        {/* 상단 배경 이미지 및 뒤로가기 버튼 */}\n        <button onClick={onClose} style={{ position: 'absolute', left: 18, top: 18, background: 'rgba(0,0,0,0.32)', border: 'none', fontSize: 28, color: '#fff', cursor: 'pointer', zIndex: 21, padding: '4px 12px', borderRadius: 18, lineHeight: 1 }} aria-label=\"뒤로가기\">←</button>\n        <div style={{ width: '100%', aspectRatio: '3/4', background: '#222', position: 'relative', overflow: 'hidden' }}>\n          <img\n            src={character.profileImg || DEFAULT_PROFILE_IMG}\n            alt={character.name}\n            style={{ width: '100%', height: '100%', objectFit: 'cover', objectPosition: 'center', zIndex: 1, filter: 'brightness(0.92)' }}\n            onError={e => {\n              if (e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG)) return;\n              e.currentTarget.onerror = null;\n              e.currentTarget.src = DEFAULT_PROFILE_IMG;\n            }}\n          />\n        {/* 카테고리, by */}\n          <div style={{ position: 'absolute', left: 18, top: 18, display: 'flex', alignItems: 'center', gap: 10, zIndex: 2 }}>\n            <span style={{ background: '#ffb3d1', color: '#fff', fontWeight: 700, fontSize: 13, borderRadius: 8, padding: '4px 10px' }}>{character.category || '카테고리 없음'}</span>\n            <span style={{ color: '#fff', fontWeight: 500, fontSize: 15, opacity: 0.85 }}>by. 제작자</span>\n        </div>\n        </div>\n        {/* 프로필, 이름, 나이/직업 */}\n        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginTop: -32, zIndex: 3, width: '100%' }}>\n          <img\n            src={character.profileImg || DEFAULT_PROFILE_IMG}\n            alt={character.name}\n            style={{ width: 80, height: 80, borderRadius: '50%', objectFit: 'cover', border: '3px solid #fff', background: '#eee', marginBottom: 8, boxShadow: '0 2px 12px #0003' }}\n            onError={e => {\n              if (e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG)) return;\n              e.currentTarget.onerror = null;\n              e.currentTarget.src = DEFAULT_PROFILE_IMG;\n            }}\n          />\n          <div style={{ fontWeight: 700, fontSize: 22, color: '#fff', marginBottom: 2 }}>{character.name}</div>\n          <div style={{ fontSize: 16, color: '#ccc', marginBottom: 10 }}>{character.age}살 · {character.job}</div>\n        </div>\n        {/* 첫상황/첫대사 */}\n          {character.firstScene && (\n          <div style={{ fontSize: 15, color: '#bbb', margin: '0 0 4px 0', textAlign: 'center', maxWidth: 320 }}>{character.firstScene}</div>\n          )}\n          {character.firstMessage && (\n          <div style={{ fontSize: 17, color: '#fff', fontWeight: 500, background: 'rgba(255,255,255,0.08)', borderRadius: 10, padding: '8px 16px', margin: '0 0 8px 0', textAlign: 'center', maxWidth: 320 }}>{character.firstMessage}</div>\n          )}\n        {/* 태그 */}\n        {character.selectedTags && character.selectedTags.length > 0 && (\n          <div style={{ padding: '8px 20px 0 20px', display: 'flex', gap: 8, flexWrap: 'wrap', width: '100%' }}>\n            {character.selectedTags.map((tag: string) => (\n              <span key={tag} style={{ background: '#ffd6ea', color: '#ff4081', borderRadius: 8, padding: '4px 10px', fontWeight: 600, fontSize: 14 }}>#{tag}</span>\n            ))}\n        </div>\n        )}\n        {/* 탭 */}\n        <div style={{ display: 'flex', margin: '24px 0 0 0', borderBottom: '1.5px solid #f5b3d7', width: '100%' }}>\n          <div onClick={() => setTab(0)} style={{ flex: 1, textAlign: 'center', padding: 12, fontWeight: 700, color: tab === 0 ? '#ff4081' : '#bbb', borderBottom: tab === 0 ? '2.5px solid #ff4081' : 'none', cursor: 'pointer' }}>서사</div>\n          <div onClick={() => setTab(1)} style={{ flex: 1, textAlign: 'center', padding: 12, fontWeight: 700, color: tab === 1 ? '#ff4081' : '#bbb', borderBottom: tab === 1 ? '2.5px solid #ff4081' : 'none', cursor: 'pointer' }}>첫 장면</div>\n          <div onClick={() => setTab(2)} style={{ flex: 1, textAlign: 'center', padding: 12, fontWeight: 700, color: tab === 2 ? '#ff4081' : '#bbb', borderBottom: tab === 2 ? '2.5px solid #ff4081' : 'none', cursor: 'pointer' }}>커뮤니티</div>\n        </div>\n        {/* 탭 내용 */}\n        <div style={{ padding: '20px', width: '100%', paddingBottom: 90 }}>\n          {tab === 0 && (\n            <>\n              <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 6, color: '#fff' }}>{character.name}의 서사</div>\n              <div style={{ background: '#232124', borderRadius: 12, padding: 16, fontWeight: 500, color: '#fff', fontSize: 16 }}>{character.firstScene || '등록된 서사가 없습니다.'}</div>\n            </>\n          )}\n          {tab === 1 && (\n            <>\n              <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 6, color: '#fff' }}>첫 상황</div>\n              <div style={{ background: '#232124', borderRadius: 12, padding: 16, fontWeight: 500, color: '#fff', fontSize: 16, marginBottom: 16 }}>{character.firstScene || '등록된 첫 상황이 없습니다.'}</div>\n              <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 6, color: '#fff' }}>채팅 첫 마디</div>\n              <div style={{ background: '#232124', borderRadius: 12, padding: 16, fontWeight: 500, color: '#fff', fontSize: 16 }}>{character.firstMessage || '등록된 첫 마디가 없습니다.'}</div>\n            </>\n          )}\n          {tab === 2 && (\n            <>\n              <div style={{ background: '#232124', borderRadius: 12, padding: 32, fontWeight: 700, color: '#ff4081', fontSize: 18, textAlign: 'center' }}>준비중</div>\n            </>\n          )}\n        </div>\n        {/* 하단 고정 채팅하기 버튼 */}\n        <button\n          style={{\n            position: 'absolute', left: '50%', transform: 'translateX(-50%)', bottom: 18, height: 56, width: '90%', maxWidth: 370, background: '#ff4081', color: '#fff', fontWeight: 700, fontSize: 20, border: 'none', borderRadius: 18, cursor: 'pointer', zIndex: 10, boxShadow: '0 2px 12px #ff408133'\n          }}\n          onClick={onChatClick}\n        >채팅하기</button>\n        {/* 닫기 버튼 */}\n        <button onClick={onClose} style={{ position: 'absolute', right: 18, top: 18, background: 'none', border: 'none', fontSize: 28, color: '#fff', cursor: 'pointer', zIndex: 20 }}>✖️</button>\n      </div>\n    </div>\n  );\n}\n\nexport default function ForYouPage() {\n  const [characters, setCharacters] = useState<Character[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [index, setIndex] = useState(0);\n  const [showPersonaModal, setShowPersonaModal] = useState(false);\n  const [showPersonaManager, setShowPersonaManager] = useState(false);\n  const [showPersonaCreator, setShowPersonaCreator] = useState(false);\n  const [personas, setPersonas] = useState<Persona[]>([]);\n  const [selectedPersona, setSelectedPersona] = useState<string>(\"\");\n  const [addingPersona, setAddingPersona] = useState(false);\n  const [newPersonaName, setNewPersonaName] = useState(\"\");\n  const [newPersonaAvatar, setNewPersonaAvatar] = useState<string>(\"\");\n  const [creatorProfileImg, setCreatorProfileImg] = useState<string>(\"\");\n  const [creatorGender, setCreatorGender] = useState(\"밝히지 않음\");\n  const [creatorName, setCreatorName] = useState(\"\");\n  const [creatorAge, setCreatorAge] = useState(\"\");\n  const [creatorJob, setCreatorJob] = useState(\"\");\n  const [creatorInfo, setCreatorInfo] = useState(\"\");\n  const [creatorHabit, setCreatorHabit] = useState(\"\");\n  const [showProfileModal, setShowProfileModal] = useState(false);\n  const [selectedProfile, setSelectedProfile] = useState<any>(null);\n  const [showProfileEditModal, setShowProfileEditModal] = useState(false);\n  const [editProfile, setEditProfile] = useState<any>(null);\n  const [showProfileCreateModal, setShowProfileCreateModal] = useState(false);\n  const navigate = useNavigate();\n  const [introLoading, setIntroLoading] = useState(true);\n  const [likedCharacters, setLikedCharacters] = useState<number[]>([]);\n  const { user } = useAuth();\n  const userId = user?.uid || \"\";\n  const [showArchiveModal, setShowArchiveModal] = useState(false);\n  const [archiveDetailCharacter, setArchiveDetailCharacter] = useState<Character | null>(null);\n  const [showArchiveDetailModal, setShowArchiveDetailModal] = useState(false);\n\n  // 좋아요한 캐릭터 목록 불러오기\n  useEffect(() => {\n    if (!userId) return;\n    fetch(`${API_BASE_URL}/api/character/favor?userId=${userId}`)\n      .then(res => res.json())\n      .then(data => {\n        if (data.ok && Array.isArray(data.liked)) setLikedCharacters(data.liked);\n      });\n  }, [userId]);\n\n  // 하트(좋아요) 토글\n  const handleToggleLike = async (characterId: number) => {\n    if (!userId) return;\n    const liked = likedCharacters.includes(characterId);\n    if (!liked) {\n      // 좋아요 추가\n      await fetch(FAVOR_API, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ userId, characterId })\n      });\n      setLikedCharacters(prev => [...prev, characterId]);\n    } else {\n      // 좋아요 취소\n      await fetch(FAVOR_API, {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ userId, characterId })\n      });\n      setLikedCharacters(prev => prev.filter(id => id !== characterId));\n    }\n  };\n\n  // 프로필 사진 업로드\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n  const handleProfileImgClick = () => fileInputRef.current?.click();\n  const handleProfileImgChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (ev) => {\n        setCreatorProfileImg(ev.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // 멀티프로필 목록 불러오기 (GET)\n  useEffect(() => {\n    if (!userId) return;\n    fetch(`${API_BASE_URL}/api/persona?userId=${userId}`)\n      .then(res => res.json())\n      .then(data => {\n        if (data.ok && Array.isArray(data.personas)) setPersonas(data.personas);\n        else setPersonas([]);\n      })\n      .catch(() => setPersonas([]));\n  }, [userId, showPersonaManager, showPersonaCreator]);\n\n  useEffect(() => {\n    fetch(`${API_BASE_URL}/api/character`)\n      .then(res => res.json())\n      .then(data => {\n        if (data.ok) setCharacters(data.characters);\n        setLoading(false);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (showPersonaCreator) {\n      setCreatorProfileImg(\"\");\n      setCreatorGender(\"밝히지 않음\");\n      setCreatorName(\"\");\n      setCreatorAge(\"\");\n      setCreatorJob(\"\");\n      setCreatorInfo(\"\");\n      setCreatorHabit(\"\");\n    }\n  }, [showPersonaCreator]);\n\n  useEffect(() => {\n    setIntroLoading(true);\n    const timer = setTimeout(() => setIntroLoading(false), 2500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handlePrev = () => {\n    setIndex((prev) => (prev === 0 ? characters.length - 1 : prev - 1));\n  };\n  const handleNext = () => {\n    setIndex((prev) => (prev === characters.length - 1 ? 0 : prev + 1));\n  };\n\n  // 터치 스와이프 지원\n  let touchStartX = 0;\n  let touchEndX = 0;\n  const handleTouchStart = (e: React.TouchEvent) => {\n    touchStartX = e.changedTouches[0].screenX;\n  };\n  const handleTouchEnd = (e: React.TouchEvent) => {\n    touchEndX = e.changedTouches[0].screenX;\n    if (touchEndX - touchStartX > 50) handlePrev();\n    else if (touchStartX - touchEndX > 50) handleNext();\n  };\n\n  // 채팅하기 버튼 클릭 시\n  const handleChatClick = () => {\n    if (multiPersonas.length === 0) {\n      setShowPersonaCreator(true);\n      return;\n    }\n    setShowPersonaModal(true);\n  };\n\n  // 페르소나 추가\n  const handleAddPersona = () => {\n    if (!newPersonaName) return;\n    setPersonas(prev => [\n      ...prev,\n      { id: newPersonaName, name: newPersonaName, avatar: newPersonaAvatar || \"/imgdefault.jpg\" }\n    ]);\n    setSelectedPersona(newPersonaName);\n    setNewPersonaName(\"\");\n    setNewPersonaAvatar(\"\");\n    setAddingPersona(false);\n  };\n\n  // 멀티프로필 생성 완료 (POST)\n  const handlePersonaCreate = async () => {\n    if (!userId) return;\n    if (!creatorName) return alert(\"이름을 입력해주세요\");\n    const payload = {\n      userId,\n      name: creatorName,\n      avatar: creatorProfileImg || \"/imgdefault.jpg\",\n      gender: creatorGender,\n      age: creatorAge,\n      job: creatorJob,\n      info: creatorInfo,\n      habit: creatorHabit,\n    };\n    const res = await fetch(`${API_BASE_URL}/api/persona`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload),\n    });\n    const data = await res.json();\n    if (data.ok) {\n      setShowPersonaCreator(false);\n      setShowPersonaManager(false);\n      // 폼 초기화는 useEffect에서 처리\n    } else {\n      alert(\"프로필 저장 실패: \" + data.error);\n    }\n  };\n\n  // 멀티프로필 삭제 (DELETE)\n  const handleDeletePersona = async (id: string) => {\n    if (!userId) return;\n    if (id === userId) return; // 기본 프로필은 삭제 불가\n    if (window.confirm(\"정말로 삭제하시겠습니까?\")) {\n      await fetch(`${API_BASE_URL}/api/persona/${id}`, { method: \"DELETE\" });\n      setPersonas(prev => prev.filter(p => p.id !== id));\n      if (selectedPersona === id && personas.length > 1) {\n        setSelectedPersona(personas[0].id);\n      }\n    }\n  };\n\n  // 채팅 시작\n  const handleStartChat = () => {\n    setShowPersonaModal(false);\n    if (selectedPersona === userId) {\n      alert(\"기본 프로필은 선택할 수 없습니다.\");\n    } else {\n      navigate(`/chat/${characters[index].id}?persona=${selectedPersona}`);\n    }\n  };\n\n  // 캐릭터 카드 클릭 시 상세로 이동\n  const handleCardClick = (id: number) => {\n    navigate(`/character/${id}`);\n  };\n\n  // 멀티프로필만 추출 (id, name 둘 다 체크)\n  const multiPersonas = personas.filter(\n    p => p.id !== userId && p.name !== userId && p.name !== \"user_74127\"\n  );\n\n  // 기본 프로필(관리계정) 추출\n  const defaultPersona = personas.find(p => p.id === userId);\n  // localStorage에서 유저 이름 가져오기\n  let localUserName = undefined;\n  try {\n    const savedUserProfile = localStorage.getItem('userProfile');\n    if (savedUserProfile) {\n      const profile = JSON.parse(savedUserProfile);\n      localUserName = profile.name;\n    }\n  } catch (e) {}\n\n  // 멀티프로필 관리 모달 내부\n  const PersonaManager = () => {\n    const managedPersonas = personas.filter(\n      p => p.id !== userId && p.name !== userId\n    );\n    return (\n    <div style={{\n        position: \"fixed\", left: 0, top: 0, width: \"100vw\", height: \"100vh\", background: \"rgba(20,20,20,0.98)\", zIndex: 2000, display: \"flex\", flexDirection: \"column\", alignItems: 'center', justifyContent: 'center' }}>\n        <div style={{ width: '100%', maxWidth: 430, background: '#18171a', borderRadius: 18, boxShadow: '0 2px 16px #0005', minHeight: 480, display: 'flex', flexDirection: 'column', justifyContent: 'flex-start' }}>\n          <div style={{ display: \"flex\", alignItems: \"center\", padding: \"18px 20px 10px 20px\", borderBottom: \"1px solid #222\", justifyContent: 'space-between', borderTopLeftRadius: 18, borderTopRightRadius: 18 }}>\n            <div style={{ display: 'flex', alignItems: 'center' }}>\n        <button onClick={() => setShowPersonaManager(false)} style={{ background: \"none\", border: \"none\", fontSize: 26, marginRight: 8, cursor: \"pointer\", color: \"#fff\" }}>&larr;</button>\n              <span style={{ fontWeight: 700, fontSize: 22, color: '#fff' }}>멀티프로필</span>\n      </div>\n        <button\n              onClick={() => setShowProfileCreateModal(true)}\n              disabled={managedPersonas.length >= 10}\n              style={{ display: \"flex\", alignItems: \"center\", background: \"none\", border: \"none\", color: managedPersonas.length >= 10 ? \"#888\" : \"#ff4081\", fontWeight: 600, fontSize: 18, cursor: managedPersonas.length >= 10 ? \"not-allowed\" : \"pointer\" }}\n              title={managedPersonas.length >= 10 ? '최대 10개까지 생성할 수 있습니다.' : ''}\n        >\n              <span style={{ fontSize: 26, marginRight: 4 }}>+</span> 만들기 ({managedPersonas.length}/10)\n        </button>\n          </div>\n          <div style={{ padding: 24 }}>\n            {managedPersonas.length === 0 && (\n          <div style={{ color: \"#bbb\", fontSize: 16, marginTop: 40 }}>아직 등록된 프로필이 없습니다.</div>\n        )}\n            {managedPersonas.map(p => (\n              <div key={p.id} style={{ display: \"flex\", alignItems: \"center\", background: \"#232124\", borderRadius: 16, padding: '18px 16px', marginBottom: 18, boxShadow: '0 2px 8px #0002', minHeight: 68 }}>\n            <img\n                  src={p.avatar || \"/imgdefault.jpg\"}\n              alt={p.name}\n                  style={{ width: 54, height: 54, borderRadius: \"50%\", marginRight: 18, objectFit: \"cover\", boxShadow: '0 2px 8px #0002' }}\n                  onError={e => { e.currentTarget.onerror = null; e.currentTarget.src = \"/imgdefault.jpg\"; }}\n            />\n                <span style={{ fontWeight: 700, fontSize: 19, color: '#fff' }}>{p.name}</span>\n                <button onClick={() => handleProfileEdit(p)} style={{ marginLeft: \"auto\", background: \"none\", border: \"none\", color: \"#ff4081\", fontSize: 18, fontWeight: 600, cursor: \"pointer\", padding: '0 8px' }}>수정</button>\n                <button onClick={() => handleDeletePersona(p.id)} style={{ background: \"none\", border: \"none\", color: \"#ff4081\", fontSize: 26, fontWeight: 700, cursor: \"pointer\", padding: '0 4px' }}>✕</button>\n          </div>\n        ))}\n          </div>\n      </div>\n    </div>\n  );\n  };\n\n  // 멀티프로필 생성 폼 전체화면\n  const PersonaCreator = ({\n    creatorProfileImg,\n    handleProfileImgClick,\n    fileInputRef,\n    handleProfileImgChange,\n    creatorGender,\n    setCreatorGender,\n    creatorName,\n    setCreatorName,\n    creatorAge,\n    setCreatorAge,\n    creatorJob,\n    setCreatorJob,\n    creatorInfo,\n    setCreatorInfo,\n    creatorHabit,\n    setCreatorHabit,\n    handlePersonaCreate,\n    setShowPersonaCreator\n  }: any) => (\n    <div style={{ position: \"fixed\", left: 0, top: 0, width: \"100vw\", height: \"100vh\", background: \"var(--color-card)\", zIndex: 3000, display: \"flex\", flexDirection: \"column\" }}>\n      <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", padding: \"18px 20px 10px 20px\" }}>\n        <button onClick={() => setShowPersonaCreator(false)} style={{ background: \"none\", border: \"none\", fontSize: 26, cursor: \"pointer\", color: \"#fff\" }}>&larr;</button>\n        <span></span>\n        <button onClick={handlePersonaCreate} style={{ background: \"none\", border: \"none\", color: \"#ff4081\", fontWeight: 700, fontSize: 20, cursor: \"pointer\" }}>완료</button>\n      </div>\n      <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", marginTop: 16 }}>\n        <div style={{ position: \"relative\", width: 110, height: 110, marginBottom: 16 }}>\n          <img\n            src={creatorProfileImg || \"/imgdefault.jpg\"}\n            alt=\"프로필\"\n            style={{ width: 110, height: 110, borderRadius: \"50%\", objectFit: \"cover\", background: \"#ffe5e5\" }}\n          />\n          <button\n            type=\"button\"\n            onClick={handleProfileImgClick}\n            style={{\n              position: \"absolute\", right: 0, bottom: 0, background: \"#fff\", border: \"none\", borderRadius: \"50%\", width: 36, height: 36, display: \"flex\", alignItems: \"center\", justifyContent: \"center\", fontSize: 20, boxShadow: \"0 2px 8px rgba(0,0,0,0.08)\", cursor: \"pointer\"\n            }}\n            aria-label=\"프로필 사진 변경\"\n          >\n            <span role=\"img\" aria-label=\"edit\">✏️</span>\n          </button>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"image/*\"\n            style={{ display: \"none\" }}\n            onChange={handleProfileImgChange}\n          />\n        </div>\n      </div>\n      <div style={{ padding: \"0 20px\", marginTop: 8 }}>\n        {/* 성별 */}\n        <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 8 }}>성별</div>\n        <div style={{ display: \"flex\", gap: 18, marginBottom: 18 }}>\n          {['남성', '여성', '밝히지 않음'].map(g => (\n            <label key={g} style={{ display: \"flex\", alignItems: \"center\", fontWeight: 500, fontSize: 16 }}>\n              <input type=\"radio\" checked={creatorGender === g} onChange={() => setCreatorGender(g)} style={{ marginRight: 6 }} /> {g}\n            </label>\n          ))}\n        </div>\n        {/* 이름 */}\n        <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 4 }}>이름 <span style={{ color: '#888', fontWeight: 400, fontSize: 14 }}>(필수)</span></div>\n        <input\n          placeholder=\"이름을 입력해주세요\"\n          value={creatorName}\n          onChange={e => {\n            const v = e.target.value;\n            if (v.length <= 15) setCreatorName(v);\n            else setCreatorName(v.slice(0, 15));\n          }}\n          style={{ width: \"100%\", borderRadius: 12, border: \"1px solid #eee\", padding: 14, fontSize: 16, marginBottom: 2, background: '#fafafa' }}\n        />\n        <div style={{ color: '#bbb', fontSize: 13, textAlign: 'right', marginBottom: 12 }}>{creatorName.length}/15</div>\n        {/* 나이 */}\n        <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 4 }}>나이</div>\n        <input\n          placeholder=\"나이를 입력해주세요\"\n          value={creatorAge}\n          onChange={e => {\n            const v = e.target.value;\n            if (v.length <= 15) setCreatorAge(v);\n            else setCreatorAge(v.slice(0, 15));\n          }}\n          style={{ width: \"100%\", borderRadius: 12, border: \"1px solid #eee\", padding: 14, fontSize: 16, marginBottom: 2, background: '#fafafa' }}\n        />\n        <div style={{ color: '#bbb', fontSize: 13, textAlign: 'right', marginBottom: 12 }}>{creatorAge.length}/15</div>\n        {/* 직업 */}\n        <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 4 }}>직업</div>\n        <input\n          placeholder=\"직업을 입력해주세요\"\n          value={creatorJob}\n          onChange={e => {\n            const v = e.target.value;\n            if (v.length <= 15) setCreatorJob(v);\n            else setCreatorJob(v.slice(0, 15));\n          }}\n          style={{ width: \"100%\", borderRadius: 12, border: \"1px solid #eee\", padding: 14, fontSize: 16, marginBottom: 2, background: '#fafafa' }}\n        />\n        <div style={{ color: '#bbb', fontSize: 13, textAlign: 'right', marginBottom: 12 }}>{creatorJob.length}/15</div>\n        {/* 기본 정보 */}\n        <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 4 }}>기본 정보</div>\n        <textarea\n          placeholder=\"외모, 성격 등 기본 정보를 알려주세요\"\n          value={creatorInfo}\n          onChange={e => {\n            const v = e.target.value;\n            if (v.length <= 500) setCreatorInfo(v);\n            else setCreatorInfo(v.slice(0, 500));\n          }}\n          style={{ width: \"100%\", borderRadius: 12, border: \"1px solid #eee\", padding: 14, fontSize: 16, marginBottom: 2, background: '#fafafa', resize: 'none' }}\n          rows={3}\n        />\n        <div style={{ color: '#bbb', fontSize: 13, textAlign: 'right', marginBottom: 12 }}>{creatorInfo.length}/500</div>\n        {/* 습관적 말과 행동 */}\n        <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 4 }}>습관적인 말과 행동</div>\n        <textarea\n          placeholder=\"예시를 입력해주세요\"\n          value={creatorHabit}\n          onChange={e => {\n            const v = e.target.value;\n            if (v.length <= 500) setCreatorHabit(v);\n            else setCreatorHabit(v.slice(0, 500));\n          }}\n          style={{ width: \"100%\", borderRadius: 12, border: \"1px solid #eee\", padding: 14, fontSize: 16, marginBottom: 2, background: '#fafafa', resize: 'none' }}\n          rows={3}\n        />\n        <div style={{ color: '#bbb', fontSize: 13, textAlign: 'right', marginBottom: 12 }}>{creatorHabit.length}/500</div>\n      </div>\n    </div>\n  );\n\n  const handleProfileEdit = (profile: any) => {\n    console.log('수정 클릭', profile);\n    setEditProfile(profile);\n    setShowProfileEditModal(true);\n  };\n\n  const handleProfileSave = async (updatedProfile: any) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/persona/${updatedProfile.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          name: updatedProfile.name,\n          gender: updatedProfile.gender,\n          age: updatedProfile.age,\n          job: updatedProfile.job,\n          info: updatedProfile.info,\n          habit: updatedProfile.habit,\n          avatar: updatedProfile.avatar || '/imgdefault.jpg'\n        }),\n      });\n      if (response.ok) {\n        setPersonas(prev => prev.map(p => p.id === updatedProfile.id ? updatedProfile : p));\n        setShowProfileEditModal(false);\n        setEditProfile(null);\n        alert('프로필이 성공적으로 수정되었습니다.');\n      } else {\n        throw new Error('프로필 수정에 실패했습니다.');\n      }\n    } catch (error) {\n      alert('프로필 수정 중 오류가 발생했습니다.');\n    }\n  };\n\n  const handleProfileCreate = async (newProfile: any) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/persona`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          userId,\n          name: newProfile.name,\n          gender: newProfile.gender,\n          age: newProfile.age,\n          job: newProfile.job,\n          info: newProfile.info,\n          habit: newProfile.habit,\n          avatar: newProfile.avatar\n        }),\n      });\n      if (response.ok) {\n        setShowProfileCreateModal(false);\n        setShowPersonaManager(false);\n        // 목록 갱신\n        fetch(`${API_BASE_URL}/api/persona?userId=${userId}`)\n          .then(res => res.json())\n          .then(data => { if (data.ok) setPersonas(data.personas); });\n        alert('프로필이 성공적으로 생성되었습니다.');\n      } else {\n        throw new Error('프로필 생성에 실패했습니다.');\n      }\n    } catch (error) {\n      alert('프로필 생성 중 오류가 발생했습니다.');\n    }\n  };\n\n  // selectedPersona의 기본값 설정 부분\n  useEffect(() => {\n    if (multiPersonas.length > 0) {\n      // 현재 선택된 프로필이 목록에 없으면만 첫 번째로 초기화\n      if (!multiPersonas.some(p => p.id === selectedPersona)) {\n        setSelectedPersona(multiPersonas[0].id);\n      }\n    } else {\n      setSelectedPersona(\"\");\n    }\n    // eslint-disable-next-line\n  }, [multiPersonas, showPersonaModal]);\n\n  return (\n    <div style={{ width: '100%', maxWidth: 430, margin: '0 auto', minHeight: '100vh', background: '#111', display: 'flex', flexDirection: 'column', alignItems: 'center', paddingBottom: 80 }}>\n      <div style={{ position: 'relative', padding: \"24px 20px 0 20px\", width: '100%', maxWidth: 430, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <span style={{ fontWeight: 700, fontSize: 24, color: '#fff', letterSpacing: 1 }}>FOR YOU ♥</span>\n        <span\n          style={{ position: 'absolute', right: 20, top: 24, fontSize: 26, color: '#ffb3d1', cursor: 'pointer' }}\n          title=\"보관함\"\n          onClick={() => setShowArchiveModal(true)}\n        >🗂️</span>\n      </div>\n      {introLoading ? (\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", height: \"70vh\", width: \"100%\" }}>\n          <div style={{\n            width: 64, height: 64, border: \"6px solid #ffb6d5\", borderTop: \"6px solid #ff4081\", borderRadius: \"50%\",\n            animation: \"spin 1s linear infinite\", marginBottom: 32\n          }} />\n          <div style={{ color: \"#fff\", fontWeight: 600, fontSize: 20, marginBottom: 8 }}>\n            {(localUserName || defaultPersona?.name || user?.displayName || \"사용자\")}님과 어울리는 캐릭터를 찾고 있습니다\n          </div>\n          <style>{`@keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }`}</style>\n        </div>\n      ) : loading ? (\n        <ForYouSkeleton />\n      ) : characters.length === 0 ? (\n        <div style={{ padding: 20, color: \"#888\" }}>저장된 캐릭터가 없습니다.</div>\n      ) : (\n        <div\n          style={{\n            position: \"relative\",\n            width: 360,\n            height: 540,\n            borderRadius: 32,\n            overflow: \"hidden\",\n            background: \"#111\",\n            boxShadow: \"0 4px 32px rgba(0,0,0,0.25)\",\n            margin: \"0 auto\"\n          }}\n        >\n          {/* 배경 이미지 + 어둡게 */}\n          <img\n            src={characters[index].backgroundImg || characters[index].profileImg || DEFAULT_PROFILE_IMG}\n            alt=\"bg\"\n            style={{\n              position: \"absolute\", inset: 0, width: \"100%\", height: \"100%\",\n              objectFit: \"cover\", filter: \"brightness(0.6) blur(1.5px)\", zIndex: 1\n            }}\n            onError={e => { if (!e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG)) { e.currentTarget.onerror = null; e.currentTarget.src = DEFAULT_PROFILE_IMG; } }}\n          />\n          {/* 상단 정보 */}\n            <div style={{\n            position: \"absolute\", top: 28, left: 24, zIndex: 3, color: \"#fff\", textAlign: \"left\", display: \"flex\", alignItems: \"center\"\n          }}>\n              <img\n                src={characters[index].profileImg || DEFAULT_PROFILE_IMG}\n                alt={characters[index].name}\n              style={{ width: 48, height: 48, borderRadius: \"50%\", border: \"2px solid #fff\", objectFit: \"cover\", background: \"#eee\", marginRight: 14, cursor: 'pointer' }}\n              onClick={() => handleCardClick(characters[index].id)}\n              onError={e => { if (!e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG)) { e.currentTarget.onerror = null; e.currentTarget.src = DEFAULT_PROFILE_IMG; } }}\n              />\n            <div>\n              <div style={{ fontWeight: 700, fontSize: 20 }}>{characters[index].name}</div>\n              <div style={{ fontSize: 15, opacity: 0.85 }}>{characters[index].age ? characters[index].age : \"-\"} | {characters[index].job || \"-\"}</div>\n            </div>\n          </div>\n          {/* 첫상황설명 */}\n              {characters[index].firstScene && (\n            <div style={{\n              position: \"absolute\", top: 90, left: 24, right: 24, color: \"#fff\",\n              background: \"rgba(0,0,0,0.35)\", borderRadius: 12, padding: \"12px 16px\",\n              fontSize: 15, fontWeight: 400, lineHeight: 1.5, overflow: \"hidden\", textOverflow: \"ellipsis\", display: \"-webkit-box\", WebkitLineClamp: 2, WebkitBoxOrient: \"vertical\", zIndex: 3,\n              textAlign: 'center'\n            }}>\n                  {characters[index].firstScene}\n                </div>\n              )}\n          {/* 첫대사(말풍선) - 첫상황 바로 아래 중앙 정렬 */}\n              {characters[index].firstMessage && (\n            <div style={{\n              position: \"absolute\", left: '50%', top: 150, transform: 'translateX(-50%)', background: \"#8888\", color: \"#fff\",\n              borderRadius: 22, padding: \"12px 24px\", fontSize: 16, fontWeight: 500, maxWidth: 260, zIndex: 3,\n              textAlign: 'center', boxShadow: '0 2px 8px rgba(0,0,0,0.10)'\n            }}>\n                  {characters[index].firstMessage}\n                </div>\n              )}\n          {/* 하트/제작자 */}\n          <div style={{\n            position: \"absolute\", right: 24, bottom: 90, display: \"flex\", flexDirection: \"column\", alignItems: \"center\", zIndex: 3\n          }}>\n            <span\n              style={{ fontSize: 32, color: likedCharacters.includes(characters[index].id) ? \"#ff4081\" : \"#ffb3d1\", marginBottom: 6, cursor: 'pointer', transition: 'color 0.2s' }}\n              onClick={() => handleToggleLike(characters[index].id)}\n              title={likedCharacters.includes(characters[index].id) ? '좋아요 취소' : '좋아요'}\n            >{likedCharacters.includes(characters[index].id) ? '♥' : '♡'}</span>\n            <img src={characters[index].profileImg || DEFAULT_PROFILE_IMG} alt=\"제작자\" style={{ width: 32, height: 32, borderRadius: \"50%\", objectFit: \"cover\", background: \"#eee\" }} onError={e => { if (!e.currentTarget.src.endsWith(DEFAULT_PROFILE_IMG)) { e.currentTarget.onerror = null; e.currentTarget.src = DEFAULT_PROFILE_IMG; } }} />\n            <div style={{ color: \"#fff\", fontSize: 13, marginTop: 2 }}>제작자</div>\n            </div>\n          {/* 채팅 시작하기 버튼 */}\n            <button\n              style={{\n              position: \"absolute\", left: 24, right: 24, bottom: 24, height: 54,\n              background: \"#ff4081\", color: \"#fff\", border: \"none\", borderRadius: 28,\n              fontWeight: 700, fontSize: 20, boxShadow: \"0 2px 8px #ff408155\", cursor: \"pointer\", zIndex: 4\n            }}\n            onClick={() => setShowPersonaModal(true)}\n          >채팅 시작하기</button>\n          {/* 왼쪽(이전) 버튼 */}\n          <button\n            onClick={handlePrev}\n            style={{\n              position: \"absolute\", left: 8, top: \"50%\", transform: \"translateY(-50%)\", zIndex: 10,\n              width: 44, height: 44, borderRadius: \"50%\", background: \"rgba(0,0,0,0.32)\", border: \"none\",\n              display: \"flex\", alignItems: \"center\", justifyContent: \"center\", fontSize: 28, color: \"#fff\", boxShadow: \"0 2px 8px rgba(0,0,0,0.18)\", cursor: \"pointer\", transition: \"background 0.2s\"\n              }}\n            aria-label=\"이전 캐릭터\"\n            onMouseOver={e => e.currentTarget.style.background = \"rgba(0,0,0,0.5)\"}\n            onMouseOut={e => e.currentTarget.style.background = \"rgba(0,0,0,0.32)\"}\n          >\n            &#60;\n          </button>\n          {/* 오른쪽(다음) 버튼 */}\n          <button\n            onClick={handleNext}\n            style={{\n              position: \"absolute\", right: 8, top: \"50%\", transform: \"translateY(-50%)\", zIndex: 10,\n              width: 44, height: 44, borderRadius: \"50%\", background: \"rgba(0,0,0,0.32)\", border: \"none\",\n              display: \"flex\", alignItems: \"center\", justifyContent: \"center\", fontSize: 28, color: \"#fff\", boxShadow: \"0 2px 8px rgba(0,0,0,0.18)\", cursor: \"pointer\", transition: \"background 0.2s\"\n            }}\n            aria-label=\"다음 캐릭터\"\n            onMouseOver={e => e.currentTarget.style.background = \"rgba(0,0,0,0.5)\"}\n            onMouseOut={e => e.currentTarget.style.background = \"rgba(0,0,0,0.32)\"}\n          >\n            &#62;\n          </button>\n        </div>\n      )}\n      {/* 페르소나 선택 전체화면 모달 */}\n      {showPersonaModal && (\n        <div style={{\n          position: \"fixed\", left: 0, top: 0, width: \"100vw\", height: \"100vh\", background: \"#111\", zIndex: 1500, display: \"flex\", flexDirection: \"column\", alignItems: 'center', justifyContent: 'center' }}>\n          <div style={{ width: '100%', maxWidth: 420, background: '#18171a', borderRadius: 18, boxShadow: '0 2px 16px #0005', minHeight: 480, display: 'flex', flexDirection: 'column', justifyContent: 'flex-start' }}>\n            <div style={{ display: \"flex\", alignItems: \"center\", padding: \"16px 16px 10px 16px\", borderBottom: \"1px solid #222\", background: '#111', position: 'sticky', top: 0, zIndex: 2 }}>\n            <button onClick={() => setShowPersonaModal(false)} style={{ background: \"none\", border: \"none\", fontSize: 26, marginRight: 8, cursor: \"pointer\", color: \"#fff\" }}>&larr;</button>\n              <span style={{ fontWeight: 700, fontSize: 22, color: \"#fff\" }}>채팅 프로필</span>\n          </div>\n            <div style={{ padding: 18, flex: 1, overflowY: \"auto\" }}>\n              <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 8, color: \"#fff\" }}>멀티프로필</div>\n              <div style={{ color: \"#bbb\", fontSize: 14, marginBottom: 18 }}>직업과 기본 정보를 추가 지원합니다</div>\n              {multiPersonas.map(p => (\n                <div key={p.id} style={{ display: \"flex\", alignItems: \"center\", background: selectedPersona === p.id ? \"#2a1a22\" : \"#18171a\", borderRadius: 18, padding: '20px 16px', marginBottom: 18, cursor: \"pointer\", minHeight: 72, boxShadow: selectedPersona === p.id ? '0 2px 12px #ff408122' : 'none', transition: 'background 0.2s' }} onClick={() => setSelectedPersona(p.id)}>\n                <img\n                    src={p.avatar || \"/imgdefault.jpg\"}\n                  alt={p.name}\n                    style={{ width: 56, height: 56, borderRadius: \"50%\", marginRight: 18, objectFit: \"cover\", boxShadow: '0 2px 8px #0002' }}\n                    onError={e => { e.currentTarget.onerror = null; e.currentTarget.src = \"/imgdefault.jpg\"; }}\n                />\n                  <span style={{ fontWeight: 700, fontSize: 20, color: \"#fff\", letterSpacing: 0.5 }}>{p.name}</span>\n                  {selectedPersona === p.id && <span style={{ marginLeft: \"auto\", color: \"#ff4081\", fontSize: 32, fontWeight: 900 }}>✔️</span>}\n              </div>\n            ))}\n              {multiPersonas.length === 0 && (\n                <div style={{ color: '#ff4081', fontWeight: 600, fontSize: 16, margin: '32px 0', textAlign: 'center' }}>멀티프로필을 먼저 생성해주세요.</div>\n              )}\n              <button onClick={() => setShowPersonaManager(true)} style={{ width: \"100%\", background: \"#18141a\", color: \"#ff4081\", border: \"1.5px solid #ff4081\", borderRadius: 16, padding: '16px 0', fontWeight: 700, fontSize: 18, marginTop: 10, marginBottom: 18, boxShadow: '0 2px 8px #ff408122' }}>+ 프로필 추가/관리</button>\n              {multiPersonas.length > 0 && (\n                <button onClick={handleStartChat} style={{ width: \"100%\", background: \"#ff4081\", color: \"#fff\", border: \"none\", borderRadius: 16, padding: '18px 0', fontWeight: 700, fontSize: 20, marginTop: 8, boxShadow: '0 2px 12px #ff408133' }}>채팅하기</button>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n      {/* 멀티프로필 관리 전체화면 모달 */}\n      {showPersonaManager && <PersonaManager />}\n      {showPersonaCreator && (\n        <PersonaCreator\n          creatorProfileImg={creatorProfileImg}\n          handleProfileImgClick={handleProfileImgClick}\n          fileInputRef={fileInputRef}\n          handleProfileImgChange={handleProfileImgChange}\n          creatorGender={creatorGender}\n          setCreatorGender={setCreatorGender}\n          creatorName={creatorName}\n          setCreatorName={setCreatorName}\n          creatorAge={creatorAge}\n          setCreatorAge={setCreatorAge}\n          creatorJob={creatorJob}\n          setCreatorJob={setCreatorJob}\n          creatorInfo={creatorInfo}\n          setCreatorInfo={setCreatorInfo}\n          creatorHabit={creatorHabit}\n          setCreatorHabit={setCreatorHabit}\n          handlePersonaCreate={handlePersonaCreate}\n          setShowPersonaCreator={setShowPersonaCreator}\n        />\n      )}\n      {/* 프로필 상세 모달 */}\n      <CharacterDetailModal\n        isOpen={showProfileModal}\n        onClose={() => setShowProfileModal(false)}\n        character={selectedProfile}\n        onChatClick={() => {\n          setShowProfileModal(false);\n          setTimeout(() => setShowPersonaModal(true), 200);\n        }}\n      />\n      {/* 프로필 수정 모달 */}\n      {console.log('ProfileEditModal 조건', showProfileEditModal, editProfile)}\n      {showProfileEditModal && editProfile && (\n        <ProfileEditModal\n          isOpen={showProfileEditModal}\n          onClose={() => { setShowProfileEditModal(false); setEditProfile(null); }}\n          profileData={{\n            id: editProfile.id,\n            name: editProfile.name,\n            gender: editProfile.gender || '',\n            age: editProfile.age ? parseInt(editProfile.age) : 0,\n            job: editProfile.job || '',\n            info: editProfile.info || '',\n            habit: editProfile.habit || '',\n            avatar: editProfile.avatar || '/imgdefault.jpg'\n          }}\n          onSave={handleProfileSave}\n        />\n      )}\n      {/* 멀티프로필 생성 모달 */}\n      {showProfileCreateModal && (\n        <ProfileEditModal\n          isOpen={showProfileCreateModal}\n          onClose={() => setShowProfileCreateModal(false)}\n          profileData={{\n            id: '',\n            name: '',\n            gender: '',\n            age: 0,\n            job: '',\n            info: '',\n            habit: '',\n            avatar: '/imgdefault.jpg'\n          }}\n          onSave={handleProfileCreate}\n          mode=\"create\"\n        />\n      )}\n      {/* 보관함 모달 */}\n      {showArchiveModal && (\n        <div style={{\n          position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.65)', zIndex: 3000, display: 'flex', alignItems: 'center', justifyContent: 'center'\n        }}>\n          <div style={{ width: '100%', maxWidth: 400, background: '#18171a', borderRadius: 18, boxShadow: '0 2px 16px #0005', minHeight: 320, padding: 28, display: 'flex', flexDirection: 'column', alignItems: 'center', position: 'relative' }}>\n            <button onClick={() => setShowArchiveModal(false)} style={{ position: 'absolute', right: 18, top: 18, background: 'none', border: 'none', fontSize: 26, color: '#ff4081', cursor: 'pointer' }}>✖️</button>\n            <div style={{ fontWeight: 700, fontSize: 22, color: '#fff', marginBottom: 18 }}>보관함</div>\n            {likedCharacters.length === 0 ? (\n              <div style={{ color: '#bbb', fontSize: 16, marginTop: 40 }}>좋아요한 캐릭터가 없습니다.</div>\n            ) : (\n              <div style={{ width: '100%' }}>\n                {characters.filter(c => likedCharacters.includes(c.id)).map(c => (\n                  <div\n                    key={c.id}\n                    style={{ display: 'flex', alignItems: 'center', background: '#232124', borderRadius: 14, padding: '14px 12px', marginBottom: 14, boxShadow: '0 2px 8px #0002', cursor: 'pointer' }}\n                    onClick={() => { setArchiveDetailCharacter(c); setShowArchiveDetailModal(true); }}\n                  >\n                    <img src={c.profileImg || DEFAULT_PROFILE_IMG} alt={c.name} style={{ width: 48, height: 48, borderRadius: '50%', objectFit: 'cover', marginRight: 14 }} />\n                    <div style={{ flex: 1 }}>\n                      <div style={{ fontWeight: 700, fontSize: 17, color: '#fff' }}>{c.name}</div>\n                      <div style={{ color: '#bbb', fontSize: 14 }}>{c.age ? `${c.age}살` : '-'} | {c.job || '-'}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n      {/* 보관함 캐릭터 상세 모달 */}\n      {showArchiveDetailModal && archiveDetailCharacter && (\n        <CharacterDetailModal\n          isOpen={showArchiveDetailModal}\n          onClose={() => setShowArchiveDetailModal(false)}\n          character={archiveDetailCharacter}\n          onChatClick={() => {\n            setShowArchiveDetailModal(false);\n            setTimeout(() => setShowPersonaModal(true), 200);\n          }}\n        />\n      )}\n      <BottomNav />\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}