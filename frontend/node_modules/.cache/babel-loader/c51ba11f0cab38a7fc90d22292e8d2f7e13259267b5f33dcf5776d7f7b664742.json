{"ast":null,"code":"import _objectSpread from\"/Users/seungsoohan/LovleChat/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from\"react\";import BottomNav from\"../components/BottomNav\";import{useNavigate}from\"react-router-dom\";import{FiSettings}from\"react-icons/fi\";import ProfileEditModal from\"../components/ProfileEditModal\";import CharacterEditModal from\"../components/CharacterEditModal\";import ProfileDetailModal from\"../components/ProfileDetailModal\";import{signOut}from\"firebase/auth\";import{auth}from\"../firebase\";import{useAuth}from\"../hooks/useAuth\";import{API_BASE_URL}from'../lib/openai';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// 프로필 이미지 경로 상수로 지정\nconst DEFAULT_PROFILE_IMG=\"/imgdefault.jpg\";// HeartButton 컴포넌트 분리\nfunction HeartButton(_ref){let{count}=_ref;const navigate=useNavigate();return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/heart-shop'),style:{display:'flex',alignItems:'center',fontWeight:700,fontSize:18,color:\"#ff4081\",background:'none',border:'none',cursor:'pointer',padding:0,margin:0},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:4},children:\"\\uBCF4\\uC720 \\uD558\\uD2B8\"}),count,\" \",/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"\\uD558\\uD2B8\",style:{marginLeft:4,fontSize:20},children:\"\\u2764\\uFE0F\"})]});}export default function MyPage(){const navigate=useNavigate();const{user}=useAuth();const[characters,setCharacters]=useState([]);const[personas,setPersonas]=useState([]);const[showSettingsModal,setShowSettingsModal]=useState(false);const[showUserProfileEditModal,setShowUserProfileEditModal]=useState(false);const[showProfileEditModal,setShowProfileEditModal]=useState(false);const[selectedProfile,setSelectedProfile]=useState(null);const userId=(user===null||user===void 0?void 0:user.uid)||\"\";const[userProfile,setUserProfile]=useState({name:(user===null||user===void 0?void 0:user.displayName)||\"사용자\",avatar:\"/imgdefault.jpg\"});const fileInputRef=useRef(null);const[showProfileCreateModal,setShowProfileCreateModal]=useState(false);const[showCharacterEditModal,setShowCharacterEditModal]=useState(false);const[selectedCharacter,setSelectedCharacter]=useState(null);const[showProfileDetailModal,setShowProfileDetailModal]=useState(false);const[followerCount,setFollowerCount]=useState(0);const[followingCount,setFollowingCount]=useState(0);const[showLogoutConfirm,setShowLogoutConfirm]=useState(false);useEffect(()=>{if(!userId)return;// userId가 없으면 API 호출하지 않음\n// 임시 디버깅용 로그 - 계정 확인용\nconsole.log('=== 계정 정보 ===');console.log('Firebase UID:',userId);console.log('User Email:',user===null||user===void 0?void 0:user.email);console.log('Display Name:',user===null||user===void 0?void 0:user.displayName);console.log('================');// 멀티프로필 목록 불러오기\nfetch(\"\".concat(API_BASE_URL,\"/api/persona?userId=\").concat(userId)).then(res=>res.json()).then(data=>{if(data.ok&&data.personas.length>0){// 기본 프로필(userId와 같은 id를 가진 것) 찾기\nconst defaultPersona=data.personas.find(p=>p.id===userId);if(defaultPersona){setUserProfile({name:defaultPersona.name,avatar:defaultPersona.avatar});}setPersonas(data.personas);}});// 내 캐릭터 목록 불러오기\nfetch(\"\".concat(API_BASE_URL,\"/api/character?userId=\").concat(userId)).then(res=>res.json()).then(data=>{if(data.ok)setCharacters(data.characters);});// 사용자 프로필 정보 불러오기 (localStorage에서)\nconst savedUserProfile=localStorage.getItem('userProfile');if(savedUserProfile){const profile=JSON.parse(savedUserProfile);setUserProfile({name:profile.name||(user===null||user===void 0?void 0:user.displayName)||\"사용자\",avatar:profile.avatar||\"/imgdefault.jpg\"});}// 팔로워/팔로잉 수 불러오기 (임시 하드코딩, 실제 API 연동 필요)\nsetFollowerCount(2);setFollowingCount(0);},[userId,user===null||user===void 0?void 0:user.displayName]);const handleUserProfileImageClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleUserProfileImageChange=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){const reader=new FileReader();reader.onload=ev=>{var _ev$target;const newProfileImg=(_ev$target=ev.target)===null||_ev$target===void 0?void 0:_ev$target.result;setUserProfile(prev=>_objectSpread(_objectSpread({},prev),{},{avatar:newProfileImg}));// localStorage에 저장\nconst userProfileToSave={name:userProfile.name,avatar:newProfileImg};localStorage.setItem('userProfile',JSON.stringify(userProfileToSave));};reader.readAsDataURL(file);}};const handleUserNameSave=()=>{// localStorage에 저장\nconst userProfileToSave={name:userProfile.name,avatar:userProfile.avatar};localStorage.setItem('userProfile',JSON.stringify(userProfileToSave));setShowUserProfileEditModal(false);};const handleProfileEdit=profile=>{setSelectedProfile(profile);setShowProfileEditModal(true);};// 멀티프로필 목록 최신화 함수\nconst fetchPersonas=async()=>{const res=await fetch(\"\".concat(API_BASE_URL,\"/api/persona?userId=\").concat(userId));const data=await res.json();if(data.ok&&data.personas.length>0){setPersonas(data.personas);// 기본 프로필도 갱신\nconst defaultPersona=data.personas.find(p=>p.id===userId);if(defaultPersona){setUserProfile({name:defaultPersona.name,avatar:defaultPersona.avatar});}}};const handleProfileSave=async updatedProfile=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/persona/\").concat(updatedProfile.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:updatedProfile.name,gender:updatedProfile.gender,age:updatedProfile.age,job:updatedProfile.job,info:updatedProfile.info,habit:updatedProfile.habit,avatar:updatedProfile.avatar})});if(response.ok){setShowProfileEditModal(false);await fetchPersonas();// 최신 목록으로 갱신\nalert('프로필이 성공적으로 수정되었습니다.');}else{throw new Error('프로필 수정에 실패했습니다.');}}catch(error){console.error('프로필 수정 오류:',error);alert('프로필 수정 중 오류가 발생했습니다.');}};// 멀티프로필 생성 핸들러\nconst handleProfileCreate=async newProfile=>{// 기본 프로필(userId === id)은 생성이 아니라 수정만 허용\nif(newProfile.id===userId){await handleProfileSave(newProfile);setShowProfileCreateModal(false);return;}try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/persona\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId,name:newProfile.name,gender:newProfile.gender,age:newProfile.age,job:newProfile.job,info:newProfile.info,habit:newProfile.habit,avatar:newProfile.avatar})});if(response.ok){const resData=await response.json();console.log('생성된 프로필:',resData);await fetchPersonas();// 먼저 목록 갱신\nsetShowProfileCreateModal(false);// 그 다음 모달 닫기\nalert('프로필이 성공적으로 생성되었습니다.');}else{throw new Error('프로필 생성에 실패했습니다.');}}catch(error){alert('프로필 생성 중 오류가 발생했습니다.');}};return/*#__PURE__*/_jsxs(\"div\",{style:{background:\"var(--color-bg)\",minHeight:\"100vh\",paddingBottom:80},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"var(--color-card)\",borderRadius:20,margin:\"24px 20px 0 20px\",padding:20,boxShadow:\"0 2px 8px rgba(0,0,0,0.03)\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"img\",{src:userProfile.avatar||DEFAULT_PROFILE_IMG,alt:\"\\uD504\\uB85C\\uD544\",style:{width:60,height:60,borderRadius:\"50%\",marginRight:16,objectFit:\"cover\",background:\"#222\",border:\"2px solid #333\",cursor:\"pointer\"},onClick:()=>setShowProfileDetailModal(true),onError:e=>{if(!e.currentTarget.src.endsWith(\"/imgdefault.jpg\")){e.currentTarget.onerror=null;e.currentTarget.src=\"/imgdefault.jpg\";}}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20},children:userProfile.name}),/*#__PURE__*/_jsx(HeartButton,{count:35})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"right\",display:'flex',flexDirection:'column',alignItems:'flex-end',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUserProfileEditModal(true),style:{background:'#fff',border:'none',color:'#222',fontWeight:600,fontSize:15,cursor:'pointer',borderRadius:16,padding:'8px 18px',marginBottom:8},children:\"\\uB0B4 \\uD504\\uB85C\\uD544\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettingsModal(true),style:{background:'none',border:'none',color:'#888',fontSize:24,cursor:'pointer',padding:0},\"aria-label\":\"\\uC124\\uC815\",title:\"\\uC124\\uC815\",children:typeof FiSettings==='function'?/*#__PURE__*/_jsx(FiSettings,{}):null})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24,padding:\"0 20px\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:16},children:\"\\uBA40\\uD2F0\\uD504\\uB85C\\uD544\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowProfileCreateModal(true),disabled:personas.length>=10,style:{background:'none',border:'none',color:personas.length>=10?'#888':'#bbb',fontWeight:600,fontSize:16,cursor:personas.length>=10?'not-allowed':'pointer',display:'flex',alignItems:'center'},title:personas.length>=10?'최대 10개까지 생성할 수 있습니다.':'',children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:22,marginRight:6},children:\"+\"}),\" \\uBA40\\uD2F0\\uD504\\uB85C\\uD544 \\uB9CC\\uB4E4\\uAE30 (\",personas.filter(p=>p.id!==userId&&p.name!==userId&&p.name!==\"user_74127\").length,\"/10)\"]})]}),personas.filter(p=>p.id!==userId&&p.name!==userId&&p.name!==\"user_74127\").map(p=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",background:\"var(--color-card-alt)\",borderRadius:12,padding:12,marginBottom:10},children:[/*#__PURE__*/_jsx(\"img\",{src:p.avatar||DEFAULT_PROFILE_IMG,alt:p.name,style:{width:40,height:40,borderRadius:\"50%\",marginRight:12,objectFit:\"cover\",background:\"#222\",border:\"1.5px solid #333\",cursor:'pointer'},onClick:()=>{setSelectedProfile(p);setShowProfileDetailModal(true);},onError:e=>{if(!e.currentTarget.src.endsWith(\"/imgdefault.jpg\")){e.currentTarget.onerror=null;e.currentTarget.src=\"/imgdefault.jpg\";}}}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:600,fontSize:16},children:p.name}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"auto\",color:\"#4CAF50\",background:\"none\",border:\"none\",fontSize:16,cursor:\"pointer\"},onClick:()=>handleProfileEdit(p),children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"#ff4081\",background:\"none\",border:\"none\",fontSize:16,cursor:\"pointer\",marginLeft:8},onClick:async()=>{if(window.confirm(\"정말로 삭제하시겠습니까?\")){await fetch(\"\".concat(API_BASE_URL,\"/api/persona/\").concat(p.id),{method:\"DELETE\"});setPersonas(prev=>prev.filter(x=>x.id!==p.id));}},children:\"\\uC0AD\\uC81C\"})]},p.id))]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"0 20px\",fontWeight:700,fontSize:18,marginTop:24},children:\"\\uB0B4 \\uCE90\\uB9AD\\uD130\"}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"0 20px\"},children:characters.length===0?/*#__PURE__*/_jsx(\"div\",{style:{color:\"var(--color-subtext)\"},children:\"\\uC544\\uC9C1 \\uB9CC\\uB4E0 \\uCE90\\uB9AD\\uD130\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}):characters.map(char=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",background:\"var(--color-card)\",borderRadius:12,padding:12,marginBottom:12},children:[/*#__PURE__*/_jsx(\"img\",{src:char.profileImg||DEFAULT_PROFILE_IMG,alt:char.name,style:{width:48,height:48,borderRadius:\"50%\",marginRight:12,objectFit:\"cover\",cursor:\"pointer\"},onClick:()=>navigate(\"/character/\".concat(char.id)),onError:e=>{if(!e.currentTarget.src.endsWith(\"/imgdefault.jpg\")){e.currentTarget.onerror=null;e.currentTarget.src=\"/imgdefault.jpg\";}}}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:600,fontSize:16},children:char.name}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"auto\",marginRight:12,color:\"#4CAF50\",background:\"none\",border:\"none\",fontSize:16,cursor:\"pointer\"},onClick:()=>{setSelectedCharacter(char);setShowCharacterEditModal(true);},children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"#ff4081\",background:\"none\",border:\"none\",fontSize:16,cursor:\"pointer\"},onClick:async()=>{if(window.confirm(\"정말로 삭제하시겠습니까?\")){await fetch(\"\".concat(API_BASE_URL,\"/api/character/\").concat(char.id,\"?userId=\").concat(userId),{method:\"DELETE\"});// 삭제(숨김) 후 목록을 서버에서 다시 fetch\nconst res=await fetch(\"\".concat(API_BASE_URL,\"/api/character?userId=\").concat(userId));const data=await res.json();if(data.ok)setCharacters(data.characters);}},children:\"\\uC0AD\\uC81C\"})]},char.id))}),/*#__PURE__*/_jsx(BottomNav,{}),showUserProfileEditModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:2000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'var(--color-card)',borderRadius:20,padding:32,width:'90%',maxWidth:400,position:'relative',boxShadow:'0 2px 16px rgba(0,0,0,0.18)'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowUserProfileEditModal(false),style:{position:'absolute',right:16,top:16,background:'none',border:'none',fontSize:24,cursor:'pointer',color:'#fff'},\"aria-label\":\"\\uB2EB\\uAE30\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22,color:'#fff',marginBottom:32,textAlign:'center'},children:\"\\uD504\\uB85C\\uD544 \\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',marginBottom:24},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"img\",{src:userProfile.avatar||DEFAULT_PROFILE_IMG,alt:\"\\uD504\\uB85C\\uD544\",style:{width:100,height:100,borderRadius:'50%',objectFit:'cover',border:'3px solid #fff'},onError:e=>{if(!e.currentTarget.src.endsWith(\"/imgdefault.jpg\")){e.currentTarget.onerror=null;e.currentTarget.src=\"/imgdefault.jpg\";}}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUserProfileImageClick,style:{position:'absolute',right:0,bottom:0,background:'#ff4081',color:'#fff',border:'none',borderRadius:'50%',width:32,height:32,display:'flex',alignItems:'center',justifyContent:'center',fontSize:18,cursor:'pointer',boxShadow:'0 2px 8px rgba(0,0,0,0.08)'},\"aria-label\":\"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4 \\uBCC0\\uACBD\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*\",style:{display:'none'},onChange:handleUserProfileImageChange})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontWeight:600,fontSize:16,color:'#fff',marginBottom:8},children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userProfile.name,onChange:e=>setUserProfile(_objectSpread(_objectSpread({},userProfile),{},{name:e.target.value})),style:{width:'100%',padding:'12px 16px',borderRadius:12,border:'1px solid #444',background:'#333',color:'#fff',fontSize:16,outline:'none'},placeholder:\"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUserNameSave,style:{width:'100%',background:'#ff4081',color:'#fff',border:'none',borderRadius:12,padding:16,fontWeight:700,fontSize:18,cursor:'pointer'},children:\"\\uC800\\uC7A5\"})]})}),showSettingsModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:2000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#222',borderRadius:20,padding:32,width:'90%',maxWidth:340,position:'relative',boxShadow:'0 2px 16px rgba(0,0,0,0.18)',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettingsModal(false),style:{position:'absolute',right:16,top:16,background:'none',border:'none',fontSize:24,cursor:'pointer',color:'#fff'},\"aria-label\":\"\\uB2EB\\uAE30\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:22,color:'#fff',marginBottom:32},children:\"\\uC124\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLogoutConfirm(true),style:{width:'100%',background:'#ff4081',color:'#fff',border:'none',borderRadius:12,padding:16,fontWeight:700,fontSize:18,cursor:'pointer',marginBottom:8},children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]})}),showLogoutConfirm&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:3000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#222',borderRadius:16,padding:'32px 24px',minWidth:260,maxWidth:320,boxShadow:'0 4px 24px rgba(0,0,0,0.18)',textAlign:'center',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20,color:'#fff',marginBottom:12},children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#ccc',fontSize:16,marginBottom:28},children:\"\\uB85C\\uADF8\\uC544\\uC6C3 \\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12,width:'100%',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLogoutConfirm(false),style:{flex:1,background:'#444',color:'#fff',border:'none',borderRadius:10,padding:'14px 0',fontWeight:700,fontSize:16,cursor:'pointer'},children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{setShowLogoutConfirm(false);localStorage.clear();sessionStorage.clear();await signOut(auth);navigate('/login');},style:{flex:1,background:'#ff4d32',color:'#fff',border:'none',borderRadius:10,padding:'14px 0',fontWeight:700,fontSize:16,cursor:'pointer'},children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]})]})}),showProfileEditModal&&selectedProfile&&/*#__PURE__*/_jsx(ProfileEditModal,{isOpen:showProfileEditModal,onClose:async()=>{setShowProfileEditModal(false);setSelectedProfile(null);await fetchPersonas();// 모달 닫을 때도 최신화\n},profileData:{id:selectedProfile.id,name:selectedProfile.name,gender:selectedProfile.gender||'',age:parseInt(selectedProfile.age||'0')||0,job:selectedProfile.job||'',info:selectedProfile.info||'',habit:selectedProfile.habit||'',avatar:selectedProfile.avatar||'/imgdefault.jpg'},onSave:handleProfileSave}),showProfileCreateModal&&/*#__PURE__*/_jsx(ProfileEditModal,{isOpen:showProfileCreateModal,onClose:()=>setShowProfileCreateModal(false),profileData:{id:'',name:'',gender:'',age:0,job:'',info:'',habit:'',avatar:'/imgdefault.jpg'},onSave:handleProfileCreate,mode:\"create\"}),showCharacterEditModal&&selectedCharacter&&/*#__PURE__*/_jsx(CharacterEditModal,{isOpen:showCharacterEditModal,onClose:()=>{setShowCharacterEditModal(false);setSelectedCharacter(null);},characterData:selectedCharacter,onSave:async updated=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/character/\").concat(updated.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(updated)});if(!response.ok){const text=await response.text();let data;try{data=text?JSON.parse(text):{};}catch(e){data={};}throw new Error(data.error||'저장에 실패했습니다.');}setShowCharacterEditModal(false);setSelectedCharacter(null);// 목록 갱신\nconst res=await fetch(\"\".concat(API_BASE_URL,\"/api/character?userId=\").concat(userId));const data=await res.json();if(data.ok)setCharacters(data.characters);}catch(error){alert(error.message||'저장 중 오류가 발생했습니다.');}}}),showProfileDetailModal&&selectedProfile&&/*#__PURE__*/_jsx(ProfileDetailModal,{isOpen:showProfileDetailModal,onClose:()=>setShowProfileDetailModal(false),profile:selectedProfile})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","BottomNav","useNavigate","FiSettings","ProfileEditModal","CharacterEditModal","ProfileDetailModal","signOut","auth","useAuth","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","DEFAULT_PROFILE_IMG","HeartButton","_ref","count","navigate","onClick","style","display","alignItems","fontWeight","fontSize","color","background","border","cursor","padding","margin","children","marginRight","role","marginLeft","MyPage","user","characters","setCharacters","personas","setPersonas","showSettingsModal","setShowSettingsModal","showUserProfileEditModal","setShowUserProfileEditModal","showProfileEditModal","setShowProfileEditModal","selectedProfile","setSelectedProfile","userId","uid","userProfile","setUserProfile","name","displayName","avatar","fileInputRef","showProfileCreateModal","setShowProfileCreateModal","showCharacterEditModal","setShowCharacterEditModal","selectedCharacter","setSelectedCharacter","showProfileDetailModal","setShowProfileDetailModal","followerCount","setFollowerCount","followingCount","setFollowingCount","showLogoutConfirm","setShowLogoutConfirm","console","log","email","fetch","concat","then","res","json","data","ok","length","defaultPersona","find","p","id","savedUserProfile","localStorage","getItem","profile","JSON","parse","handleUserProfileImageClick","_fileInputRef$current","current","click","handleUserProfileImageChange","e","_e$target$files","file","target","files","reader","FileReader","onload","ev","_ev$target","newProfileImg","result","prev","_objectSpread","userProfileToSave","setItem","stringify","readAsDataURL","handleUserNameSave","handleProfileEdit","fetchPersonas","handleProfileSave","updatedProfile","response","method","headers","body","gender","age","job","info","habit","alert","Error","error","handleProfileCreate","newProfile","resData","minHeight","paddingBottom","borderRadius","boxShadow","justifyContent","src","alt","width","height","objectFit","onError","currentTarget","endsWith","onerror","textAlign","flexDirection","gap","marginBottom","title","marginTop","disabled","filter","map","window","confirm","x","char","profileImg","position","top","left","right","bottom","zIndex","maxWidth","ref","type","accept","onChange","value","outline","placeholder","minWidth","flex","clear","sessionStorage","isOpen","onClose","profileData","parseInt","onSave","mode","characterData","updated","text","message"],"sources":["/Users/seungsoohan/LovleChat/frontend/src/pages/MyPage.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport BottomNav from \"../components/BottomNav\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FiSettings } from \"react-icons/fi\";\nimport ProfileEditModal from \"../components/ProfileEditModal\";\nimport CharacterEditModal from \"../components/CharacterEditModal\";\nimport ProfileDetailModal from \"../components/ProfileDetailModal\";\nimport { signOut } from \"firebase/auth\";\nimport { auth } from \"../firebase\";\nimport { useAuth } from \"../hooks/useAuth\";\nimport { API_BASE_URL } from '../lib/openai';\n\ninterface Character {\n  id: number;\n  profileImg: string;\n  name: string;\n}\n\ninterface Persona {\n  id: string;\n  userId?: string;\n  name: string;\n  avatar: string;\n  gender?: string;\n  age?: string;\n  job?: string;\n  info?: string;\n  habit?: string;\n}\n\n// 프로필 이미지 경로 상수로 지정\nconst DEFAULT_PROFILE_IMG = \"/imgdefault.jpg\";\n\n// HeartButton 컴포넌트 분리\nfunction HeartButton({ count }: { count: number }) {\n  const navigate = useNavigate();\n  return (\n    <button\n      onClick={() => navigate('/heart-shop')}\n      style={{\n        display: 'flex', alignItems: 'center', fontWeight: 700, fontSize: 18, color: \"#ff4081\",\n        background: 'none', border: 'none', cursor: 'pointer', padding: 0, margin: 0\n      }}\n    >\n      <span style={{ marginRight: 4 }}>보유 하트</span>\n      {count} <span role=\"img\" aria-label=\"하트\" style={{ marginLeft: 4, fontSize: 20 }}>❤️</span>\n    </button>\n  );\n}\n\nexport default function MyPage() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [characters, setCharacters] = useState<Character[]>([]);\n  const [personas, setPersonas] = useState<Persona[]>([]);\n  const [showSettingsModal, setShowSettingsModal] = useState(false);\n  const [showUserProfileEditModal, setShowUserProfileEditModal] = useState(false);\n  const [showProfileEditModal, setShowProfileEditModal] = useState(false);\n  const [selectedProfile, setSelectedProfile] = useState<Persona | null>(null);\n  const userId = user?.uid || \"\";\n  const [userProfile, setUserProfile] = useState<{ name: string; avatar: string }>({ name: user?.displayName || \"사용자\", avatar: \"/imgdefault.jpg\" });\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [showProfileCreateModal, setShowProfileCreateModal] = useState(false);\n  const [showCharacterEditModal, setShowCharacterEditModal] = useState(false);\n  const [selectedCharacter, setSelectedCharacter] = useState<any>(null);\n  const [showProfileDetailModal, setShowProfileDetailModal] = useState(false);\n  const [followerCount, setFollowerCount] = useState(0);\n  const [followingCount, setFollowingCount] = useState(0);\n  const [showLogoutConfirm, setShowLogoutConfirm] = useState(false);\n\n  useEffect(() => {\n    if (!userId) return; // userId가 없으면 API 호출하지 않음\n\n    // 임시 디버깅용 로그 - 계정 확인용\n    console.log('=== 계정 정보 ===');\n    console.log('Firebase UID:', userId);\n    console.log('User Email:', user?.email);\n    console.log('Display Name:', user?.displayName);\n    console.log('================');\n\n    // 멀티프로필 목록 불러오기\n    fetch(`${API_BASE_URL}/api/persona?userId=${userId}`)\n      .then(res => res.json())\n      .then(data => {\n        if (data.ok && data.personas.length > 0) {\n          // 기본 프로필(userId와 같은 id를 가진 것) 찾기\n          const defaultPersona = data.personas.find((p: Persona) => p.id === userId);\n          if (defaultPersona) {\n            setUserProfile({ name: defaultPersona.name, avatar: defaultPersona.avatar });\n          }\n          setPersonas(data.personas);\n        }\n      });\n\n    // 내 캐릭터 목록 불러오기\n    fetch(`${API_BASE_URL}/api/character?userId=${userId}`)\n      .then(res => res.json())\n      .then(data => {\n        if (data.ok) setCharacters(data.characters);\n      });\n\n    // 사용자 프로필 정보 불러오기 (localStorage에서)\n    const savedUserProfile = localStorage.getItem('userProfile');\n    if (savedUserProfile) {\n      const profile = JSON.parse(savedUserProfile);\n      setUserProfile({ name: profile.name || user?.displayName || \"사용자\", avatar: profile.avatar || \"/imgdefault.jpg\" });\n    }\n\n    // 팔로워/팔로잉 수 불러오기 (임시 하드코딩, 실제 API 연동 필요)\n    setFollowerCount(2);\n    setFollowingCount(0);\n  }, [userId, user?.displayName]);\n\n  const handleUserProfileImageClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleUserProfileImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (ev) => {\n        const newProfileImg = ev.target?.result as string;\n        setUserProfile(prev => ({ ...prev, avatar: newProfileImg }));\n        // localStorage에 저장\n        const userProfileToSave = {\n          name: userProfile.name,\n          avatar: newProfileImg\n        };\n        localStorage.setItem('userProfile', JSON.stringify(userProfileToSave));\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleUserNameSave = () => {\n    // localStorage에 저장\n    const userProfileToSave = {\n      name: userProfile.name,\n      avatar: userProfile.avatar\n    };\n    localStorage.setItem('userProfile', JSON.stringify(userProfileToSave));\n    setShowUserProfileEditModal(false);\n  };\n\n  const handleProfileEdit = (profile: Persona) => {\n    setSelectedProfile(profile);\n    setShowProfileEditModal(true);\n  };\n\n  // 멀티프로필 목록 최신화 함수\n  const fetchPersonas = async () => {\n    const res = await fetch(`${API_BASE_URL}/api/persona?userId=${userId}`);\n    const data = await res.json();\n    if (data.ok && data.personas.length > 0) {\n      setPersonas(data.personas);\n      // 기본 프로필도 갱신\n      const defaultPersona = data.personas.find((p: Persona) => p.id === userId);\n      if (defaultPersona) {\n        setUserProfile({ name: defaultPersona.name, avatar: defaultPersona.avatar });\n      }\n    }\n  };\n\n  const handleProfileSave = async (updatedProfile: Persona) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/persona/${updatedProfile.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          name: updatedProfile.name,\n          gender: updatedProfile.gender,\n          age: updatedProfile.age,\n          job: updatedProfile.job,\n          info: updatedProfile.info,\n          habit: updatedProfile.habit,\n          avatar: updatedProfile.avatar\n        }),\n      });\n\n      if (response.ok) {\n        setShowProfileEditModal(false);\n        await fetchPersonas(); // 최신 목록으로 갱신\n        alert('프로필이 성공적으로 수정되었습니다.');\n      } else {\n        throw new Error('프로필 수정에 실패했습니다.');\n      }\n    } catch (error) {\n      console.error('프로필 수정 오류:', error);\n      alert('프로필 수정 중 오류가 발생했습니다.');\n    }\n  };\n\n  // 멀티프로필 생성 핸들러\n  const handleProfileCreate = async (newProfile: Persona) => {\n    // 기본 프로필(userId === id)은 생성이 아니라 수정만 허용\n    if (newProfile.id === userId) {\n      await handleProfileSave(newProfile);\n      setShowProfileCreateModal(false);\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/persona`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          userId,\n          name: newProfile.name,\n          gender: newProfile.gender,\n          age: newProfile.age,\n          job: newProfile.job,\n          info: newProfile.info,\n          habit: newProfile.habit,\n          avatar: newProfile.avatar\n        }),\n      });\n      if (response.ok) {\n        const resData = await response.json();\n        console.log('생성된 프로필:', resData);\n        await fetchPersonas(); // 먼저 목록 갱신\n        setShowProfileCreateModal(false); // 그 다음 모달 닫기\n        alert('프로필이 성공적으로 생성되었습니다.');\n      } else {\n        throw new Error('프로필 생성에 실패했습니다.');\n      }\n    } catch (error) {\n      alert('프로필 생성 중 오류가 발생했습니다.');\n    }\n  };\n\n  return (\n    <div style={{ background: \"var(--color-bg)\", minHeight: \"100vh\", paddingBottom: 80 }}>\n      {/* 상단 계정(관리용) 프로필 카드 */}\n      <div style={{\n        background: \"var(--color-card)\",\n        borderRadius: 20,\n        margin: \"24px 20px 0 20px\",\n        padding: 20,\n        boxShadow: \"0 2px 8px rgba(0,0,0,0.03)\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n      }}>\n        <div style={{ display: \"flex\", alignItems: \"center\" }}>\n          <img\n            src={userProfile.avatar || DEFAULT_PROFILE_IMG}\n            alt=\"프로필\"\n            style={{ width: 60, height: 60, borderRadius: \"50%\", marginRight: 16, objectFit: \"cover\", background: \"#222\", border: \"2px solid #333\", cursor: \"pointer\" }}\n            onClick={() => setShowProfileDetailModal(true)}\n            onError={e => {\n              if (!e.currentTarget.src.endsWith(\"/imgdefault.jpg\")) {\n              e.currentTarget.onerror = null;\n                e.currentTarget.src = \"/imgdefault.jpg\";\n              }\n            }}\n          />\n          <div>\n            <div style={{ fontWeight: 700, fontSize: 20 }}>{userProfile.name}</div>\n            <HeartButton count={35} />\n          </div>\n        </div>\n        <div style={{ textAlign: \"right\", display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: 8 }}>\n          <button\n            onClick={() => setShowUserProfileEditModal(true)}\n            style={{ background: '#fff', border: 'none', color: '#222', fontWeight: 600, fontSize: 15, cursor: 'pointer', borderRadius: 16, padding: '8px 18px', marginBottom: 8 }}\n          >\n            내 프로필\n          </button>\n          <button\n            onClick={() => setShowSettingsModal(true)}\n            style={{ background: 'none', border: 'none', color: '#888', fontSize: 24, cursor: 'pointer', padding: 0 }}\n            aria-label=\"설정\"\n            title=\"설정\"\n          >\n            {typeof FiSettings === 'function' ? <FiSettings /> : null}\n          </button>\n        </div>\n      </div>\n      {/* 멀티프로필 섹션 */}\n      <div style={{ marginTop: 24, padding: \"0 20px\" }}>\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 8 }}>\n          <div style={{ fontWeight: 700, fontSize: 16 }}>멀티프로필</div>\n          <button\n            onClick={() => setShowProfileCreateModal(true)}\n            disabled={personas.length >= 10}\n            style={{\n              background: 'none',\n              border: 'none',\n              color: personas.length >= 10 ? '#888' : '#bbb',\n              fontWeight: 600,\n              fontSize: 16,\n              cursor: personas.length >= 10 ? 'not-allowed' : 'pointer',\n              display: 'flex',\n              alignItems: 'center'\n            }}\n            title={personas.length >= 10 ? '최대 10개까지 생성할 수 있습니다.' : ''}\n          >\n            <span style={{ fontSize: 22, marginRight: 6 }}>+</span> 멀티프로필 만들기 ({personas.filter(p => p.id !== userId && p.name !== userId && p.name !== \"user_74127\").length}/10)\n          </button>\n        </div>\n        {/* 멀티프로필 리스트 (기본 프로필 제외, 멀티프로필만) */}\n        {personas.filter(p => p.id !== userId && p.name !== userId && p.name !== \"user_74127\").map((p) => (\n          <div key={p.id} style={{ display: \"flex\", alignItems: \"center\", background: \"var(--color-card-alt)\", borderRadius: 12, padding: 12, marginBottom: 10 }}>\n                <img\n                  src={p.avatar || DEFAULT_PROFILE_IMG}\n                  alt={p.name}\n              style={{ width: 40, height: 40, borderRadius: \"50%\", marginRight: 12, objectFit: \"cover\", background: \"#222\", border: \"1.5px solid #333\", cursor: 'pointer' }}\n              onClick={() => { setSelectedProfile(p); setShowProfileDetailModal(true); }}\n                  onError={e => {\n                if (!e.currentTarget.src.endsWith(\"/imgdefault.jpg\")) {\n                    e.currentTarget.onerror = null;\n                  e.currentTarget.src = \"/imgdefault.jpg\";\n                }\n                  }}\n                />\n              <span style={{ fontWeight: 600, fontSize: 16 }}>{p.name}</span>\n            <button\n              style={{ marginLeft: \"auto\", color: \"#4CAF50\", background: \"none\", border: \"none\", fontSize: 16, cursor: \"pointer\" }}\n              onClick={() => handleProfileEdit(p)}\n            >수정</button>\n            <button\n              style={{ color: \"#ff4081\", background: \"none\", border: \"none\", fontSize: 16, cursor: \"pointer\", marginLeft: 8 }}\n              onClick={async () => {\n                if (window.confirm(\"정말로 삭제하시겠습니까?\")) {\n                  await fetch(`${API_BASE_URL}/api/persona/${p.id}`, { method: \"DELETE\" });\n                  setPersonas(prev => prev.filter(x => x.id !== p.id));\n                }\n              }}\n            >삭제</button>\n            </div>\n          ))}\n        </div>\n      <div style={{ padding: \"0 20px\", fontWeight: 700, fontSize: 18, marginTop: 24 }}>내 캐릭터</div>\n      <div style={{ padding: \"0 20px\" }}>\n        {characters.length === 0 ? (\n          <div style={{ color: \"var(--color-subtext)\" }}>아직 만든 캐릭터가 없습니다.</div>\n        ) : (\n          characters.map(char => (\n            <div key={char.id} style={{ display: \"flex\", alignItems: \"center\", background: \"var(--color-card)\", borderRadius: 12, padding: 12, marginBottom: 12 }}>\n              <img\n                src={char.profileImg || DEFAULT_PROFILE_IMG}\n                alt={char.name}\n                style={{ width: 48, height: 48, borderRadius: \"50%\", marginRight: 12, objectFit: \"cover\", cursor: \"pointer\" }}\n                onClick={() => navigate(`/character/${char.id}`)}\n                onError={e => {\n                  if (!e.currentTarget.src.endsWith(\"/imgdefault.jpg\")) {\n                  e.currentTarget.onerror = null;\n                    e.currentTarget.src = \"/imgdefault.jpg\";\n                  }\n                }}\n              />\n              <span style={{ fontWeight: 600, fontSize: 16 }}>{char.name}</span>\n              <button \n                style={{ marginLeft: \"auto\", marginRight: 12, color: \"#4CAF50\", background: \"none\", border: \"none\", fontSize: 16, cursor: \"pointer\" }}\n                onClick={() => { setSelectedCharacter(char); setShowCharacterEditModal(true); }}\n              >수정</button>\n              <button \n                style={{ color: \"#ff4081\", background: \"none\", border: \"none\", fontSize: 16, cursor: \"pointer\" }}\n                onClick={async () => {\n                  if (window.confirm(\"정말로 삭제하시겠습니까?\")) {\n                    await fetch(`${API_BASE_URL}/api/character/${char.id}?userId=${userId}`, { method: \"DELETE\" });\n                    // 삭제(숨김) 후 목록을 서버에서 다시 fetch\n                    const res = await fetch(`${API_BASE_URL}/api/character?userId=${userId}`);\n                    const data = await res.json();\n                    if (data.ok) setCharacters(data.characters);\n                  }\n                }}\n              >삭제</button>\n            </div>\n          ))\n        )}\n      </div>\n      <BottomNav />\n      \n      {/* 유저 프로필 수정 모달 */}\n      {showUserProfileEditModal && (\n        <div style={{\n          position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.5)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 2000\n        }}>\n          <div style={{ background: 'var(--color-card)', borderRadius: 20, padding: 32, width: '90%', maxWidth: 400, position: 'relative', boxShadow: '0 2px 16px rgba(0,0,0,0.18)' }}>\n            <button\n              onClick={() => setShowUserProfileEditModal(false)}\n              style={{ position: 'absolute', right: 16, top: 16, background: 'none', border: 'none', fontSize: 24, cursor: 'pointer', color: '#fff' }}\n              aria-label=\"닫기\"\n            >×</button>\n            <div style={{ fontWeight: 700, fontSize: 22, color: '#fff', marginBottom: 32, textAlign: 'center' }}>프로필 수정</div>\n            \n            {/* 프로필 이미지 */}\n            <div style={{ display: 'flex', justifyContent: 'center', marginBottom: 24 }}>\n              <div style={{ position: 'relative' }}>\n                <img\n                  src={userProfile.avatar || DEFAULT_PROFILE_IMG}\n                  alt=\"프로필\"\n                  style={{ width: 100, height: 100, borderRadius: '50%', objectFit: 'cover', border: '3px solid #fff' }}\n                  onError={e => {\n                    if (!e.currentTarget.src.endsWith(\"/imgdefault.jpg\")) {\n                      e.currentTarget.onerror = null;\n                      e.currentTarget.src = \"/imgdefault.jpg\";\n                    }\n                  }}\n                />\n                <button\n                  onClick={handleUserProfileImageClick}\n                  style={{\n                    position: 'absolute',\n                    right: 0,\n                    bottom: 0,\n                    background: '#ff4081',\n                    color: '#fff',\n                    border: 'none',\n                    borderRadius: '50%',\n                    width: 32,\n                    height: 32,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: 18,\n                    cursor: 'pointer',\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.08)'\n                  }}\n                  aria-label=\"프로필 사진 변경\"\n                >\n                  ✏️\n                </button>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  style={{ display: 'none' }}\n                  onChange={handleUserProfileImageChange}\n                />\n              </div>\n            </div>\n\n            {/* 이름 입력 */}\n            <div style={{ marginBottom: 24 }}>\n              <label style={{ display: 'block', fontWeight: 600, fontSize: 16, color: '#fff', marginBottom: 8 }}>이름</label>\n              <input\n                type=\"text\"\n                value={userProfile.name}\n                onChange={(e) => setUserProfile({ ...userProfile, name: e.target.value })}\n                style={{\n                  width: '100%',\n                  padding: '12px 16px',\n                  borderRadius: 12,\n                  border: '1px solid #444',\n                  background: '#333',\n                  color: '#fff',\n                  fontSize: 16,\n                  outline: 'none'\n                }}\n                placeholder=\"이름을 입력하세요\"\n              />\n            </div>\n\n            {/* 저장 버튼 */}\n            <button\n              onClick={handleUserNameSave}\n              style={{\n                width: '100%',\n                background: '#ff4081',\n                color: '#fff',\n                border: 'none',\n                borderRadius: 12,\n                padding: 16,\n                fontWeight: 700,\n                fontSize: 18,\n                cursor: 'pointer'\n              }}\n            >\n              저장\n            </button>\n          </div>\n        </div>\n      )}\n      \n      {/* 설정 모달 */}\n      {showSettingsModal && (\n        <div style={{\n          position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.5)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 2000\n        }}>\n          <div style={{ background: '#222', borderRadius: 20, padding: 32, width: '90%', maxWidth: 340, position: 'relative', boxShadow: '0 2px 16px rgba(0,0,0,0.18)', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n            <button\n              onClick={() => setShowSettingsModal(false)}\n              style={{ position: 'absolute', right: 16, top: 16, background: 'none', border: 'none', fontSize: 24, cursor: 'pointer', color: '#fff' }}\n              aria-label=\"닫기\"\n            >×</button>\n            <div style={{ fontWeight: 700, fontSize: 22, color: '#fff', marginBottom: 32 }}>설정</div>\n            <button\n              onClick={() => setShowLogoutConfirm(true)}\n              style={{ width: '100%', background: '#ff4081', color: '#fff', border: 'none', borderRadius: 12, padding: 16, fontWeight: 700, fontSize: 18, cursor: 'pointer', marginBottom: 8 }}\n            >로그아웃</button>\n          </div>\n        </div>\n      )}\n\n      {/* 로그아웃 확인 모달 */}\n      {showLogoutConfirm && (\n        <div style={{\n          position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.5)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 3000\n        }}>\n          <div style={{ background: '#222', borderRadius: 16, padding: '32px 24px', minWidth: 260, maxWidth: 320, boxShadow: '0 4px 24px rgba(0,0,0,0.18)', textAlign: 'center', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n            <div style={{ fontWeight: 700, fontSize: 20, color: '#fff', marginBottom: 12 }}>로그아웃</div>\n            <div style={{ color: '#ccc', fontSize: 16, marginBottom: 28 }}>로그아웃 하시겠습니까?</div>\n            <div style={{ display: 'flex', gap: 12, width: '100%', justifyContent: 'center' }}>\n              <button\n                onClick={() => setShowLogoutConfirm(false)}\n                style={{ flex: 1, background: '#444', color: '#fff', border: 'none', borderRadius: 10, padding: '14px 0', fontWeight: 700, fontSize: 16, cursor: 'pointer' }}\n              >취소</button>\n              <button\n                onClick={async () => {\n                  setShowLogoutConfirm(false);\n                  localStorage.clear();\n                  sessionStorage.clear();\n                  await signOut(auth);\n                  navigate('/login');\n                }}\n                style={{ flex: 1, background: '#ff4d32', color: '#fff', border: 'none', borderRadius: 10, padding: '14px 0', fontWeight: 700, fontSize: 16, cursor: 'pointer' }}\n              >로그아웃</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* 프로필 수정 모달 */}\n      {showProfileEditModal && selectedProfile && (\n        <ProfileEditModal\n          isOpen={showProfileEditModal}\n          onClose={async () => {\n            setShowProfileEditModal(false);\n            setSelectedProfile(null);\n            await fetchPersonas(); // 모달 닫을 때도 최신화\n          }}\n          profileData={{\n            id: selectedProfile.id,\n            name: selectedProfile.name,\n            gender: selectedProfile.gender || '',\n            age: parseInt(selectedProfile.age || '0') || 0,\n            job: selectedProfile.job || '',\n            info: selectedProfile.info || '',\n            habit: selectedProfile.habit || '',\n            avatar: selectedProfile.avatar || '/imgdefault.jpg'\n          }}\n          onSave={handleProfileSave}\n        />\n      )}\n\n      {/* 멀티프로필 생성 모달 */}\n      {showProfileCreateModal && (\n        <ProfileEditModal\n          isOpen={showProfileCreateModal}\n          onClose={() => setShowProfileCreateModal(false)}\n          profileData={{\n            id: '',\n            name: '',\n            gender: '',\n            age: 0,\n            job: '',\n            info: '',\n            habit: '',\n            avatar: '/imgdefault.jpg'\n          }}\n          onSave={handleProfileCreate}\n          mode=\"create\"\n        />\n      )}\n\n      {/* 캐릭터 수정 모달 */}\n      {showCharacterEditModal && selectedCharacter && (\n        <CharacterEditModal\n          isOpen={showCharacterEditModal}\n          onClose={() => { setShowCharacterEditModal(false); setSelectedCharacter(null); }}\n          characterData={selectedCharacter}\n          onSave={async (updated) => {\n            try {\n              const response = await fetch(`${API_BASE_URL}/api/character/${updated.id}`, {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(updated)\n              });\n              if (!response.ok) {\n                const text = await response.text();\n                let data;\n                try {\n                  data = text ? JSON.parse(text) : {};\n                } catch (e) {\n                  data = {};\n                }\n                throw new Error(data.error || '저장에 실패했습니다.');\n              }\n              setShowCharacterEditModal(false);\n              setSelectedCharacter(null);\n              // 목록 갱신\n              const res = await fetch(`${API_BASE_URL}/api/character?userId=${userId}`);\n              const data = await res.json();\n              if (data.ok) setCharacters(data.characters);\n            } catch (error: any) {\n              alert(error.message || '저장 중 오류가 발생했습니다.');\n            }\n          }}\n      />\n      )}\n\n      {/* 유저 프로필 상세 모달 */}\n      {showProfileDetailModal && selectedProfile && (\n        <ProfileDetailModal\n          isOpen={showProfileDetailModal}\n          onClose={() => setShowProfileDetailModal(false)}\n          profile={selectedProfile}\n        />\n      )}\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}